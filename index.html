<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>F√ºr –ù–∞–¥—è ‚ú® | Dein Tageskompliment</title>
  <meta name="description" content="Ein kleines t√§gliches Kompliment ‚Äì jeden Tag um 23:00 Uhr deutscher Zeit, nur f√ºr Nadja." />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg: #0b0c12;
      --bg2:#11131b;
      --text:#f7f7fb;
      --muted:#b9bfd3;
      --accent:#ff80bf;
      --accent-2:#9bb8ff;
      --glass: rgba(255,255,255,0.06);
      --blur: 14px;
      --ring: 1px solid rgba(255,255,255,0.12);
      --shadow: 0 10px 30px rgba(0,0,0,0.35);
      --maxw: 820px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: radial-gradient(1200px 800px at 20% -10%, #1a1533 0%, transparent 60%),
                  radial-gradient(1200px 800px at 120% 110%, #13233f 0%, transparent 60%),
                  var(--bg);
      color:var(--text);
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
      line-height:1.6;
      overflow-x:hidden;
    }
    /* ‚ú® floating background */
    .sky{position:fixed; inset:0; overflow:hidden; z-index:-1; filter:blur(1.2px)}
    .star{
      position:absolute; bottom:-6vh;
      animation: floatUp linear infinite, twinkle ease-in-out infinite;
      opacity:.75; pointer-events:none; user-select:none;
      will-change: transform, opacity;
    }
    @keyframes floatUp{
      from{ transform: translateY(0) translateX(0) rotate(0deg); opacity: .6; }
      to{   transform: translateY(-115vh) translateX(12px) rotate(8deg); opacity: .9; }
    }
    @keyframes twinkle{
      0%,100%{ filter:blur(3px); opacity:.55 }
      50%{ filter:blur(2px); opacity:.9 }
    }

    header{
      max-width:var(--maxw);
      margin: clamp(18px, 4vw, 40px) auto 14px;
      padding: 16px 20px;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    .brand{
      font-weight:800; letter-spacing:.2px; display:flex; align-items:center; gap:10px
    }
    .brand .dot{width:10px; height:10px; border-radius:50%; background:linear-gradient(145deg,var(--accent),#ffb3d9)}
    /* Tinten-Kalligrafie SVG */
    #inkSig{ 
      margin-left:10px; 
      filter: drop-shadow(0 4px 12px rgba(0,0,0,.35));
      transition: filter 0.3s ease;
    }
    #inkSig path{
      fill:none; 
      stroke: var(--text); 
      stroke-width:2.5; 
      stroke-linecap:round; 
      stroke-linejoin:round;
      vector-effect: non-scaling-stroke;
      stroke-dasharray: var(--len, 400);
      stroke-dashoffset: var(--len, 400);
    }
    @media (prefers-reduced-motion: no-preference){
      .ink-anim path{ 
        animation: inkWrite 2.2s cubic-bezier(.25,.8,.25,1) forwards; 
      }
      @keyframes inkWrite{
        to{ stroke-dashoffset: 0; }
      }
    }
    /* Dezenter Tintenschein nach dem Schreiben */
    #inkSig.done path{ 
      filter: drop-shadow(0 0 8px rgba(255,128,191,.45)); 
    }
    .brand{ cursor: pointer; user-select: none; }
    .next{
      color:var(--muted); font-size:14px
    }

    .card{
      max-width:var(--maxw);
      margin: 0 auto;
      background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03));
      border: var(--ring);
      box-shadow: var(--shadow);
      border-radius: 16px;
      padding: clamp(18px, 4vw, 28px);
      backdrop-filter: blur(var(--blur));
    }

    .gifwrap{
      position:relative; border-radius:12px; overflow:hidden;
      background:var(--bg2);
      border: 1px solid rgba(255,255,255,0.08);
      display:flex; align-items:center; justify-content:center;
      margin-bottom:14px;
      min-height:200px;
      max-height:400px;
      width:100%;
    }
    .gifwrap img{
      max-width:100%; max-height:100%;
      width:auto; height:auto;
      object-fit:contain; display:block; opacity:.95;
      border-radius:8px;
    }

    h1{
      font-family:"Playfair Display", serif;
      font-size: clamp(26px, 4.5vw, 40px);
      margin: 6px 0 8px;
      line-height:1.25;
      letter-spacing:.2px;
    }
    .compliment{
      font-size: clamp(18px, 2.5vw, 24px);
      line-height:1.55;
      margin-top: 6px;
    }

    .meta{
      display:flex; flex-wrap:wrap; gap:10px 16px; align-items:center; margin-top:14px;
      color:var(--muted); font-size:14px;
    }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 12px; border-radius:100px; background:var(--glass); border:var(--ring)
    }
    .pill b{color:var(--text)}
    .memory-btn{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 14px; border-radius:100px; 
      background: linear-gradient(145deg, var(--accent), #ffb3d9);
      border:1px solid rgba(255,255,255,.12);
      color:#2b0f1c; font-weight:700; cursor:pointer;
      font-family:inherit; font-size:14px;
      box-shadow:0 4px 12px rgba(255,128,191,.25);
      transition: transform .08s ease, box-shadow .2s ease;
    }
    .memory-btn:hover{
      transform: translateY(-1px);
      box-shadow:0 6px 16px rgba(255,128,191,.35);
    }
    .memory-btn:active{ 
      transform: translateY(1px); 
      box-shadow:0 2px 8px rgba(255,128,191,.18);
    }

    footer{
      max-width:var(--maxw);
      margin: 14px auto 40px; padding: 0 20px; color:var(--muted); font-size:13px
    }

    /* hearts */
    .heart{
      position: fixed; pointer-events:none; will-change: transform, opacity;
      animation: pop 900ms cubic-bezier(.21,.98,.6,.99) forwards;
      font-size:22px; filter: drop-shadow(0 3px 10px rgba(0,0,0,.25));
    }
    @keyframes pop{
      0%{ transform: translate(-50%,-50%) scale(.6); opacity:0 }
      50%{ opacity:1 }
      100%{ transform: translate(-50%,-180%) scale(1.1) rotate(-12deg); opacity:0 }
    }

    .note{ margin-top:10px; font-size:12px; color:var(--muted) }
    .hint{ font-size:12px; color:var(--muted); margin-top:8px }
    a,button{font-family:inherit}
    /* Streak Gamification */
    @keyframes streak-pulse {
      0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 107, 107, 0.4); }
      50% { transform: scale(1.05); box-shadow: 0 0 20px 8px rgba(255, 107, 107, 0.2); }
    }
    .badge-item { transition: transform 0.2s ease; }
    .badge-item:hover { transform: translateY(-2px); }
    /* ===== Emoji Memory Modal ===== */
    .modal{
      position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
      background: rgba(0,0,0,.45); z-index: 999; backdrop-filter: blur(4px);
    }
    .modal[hidden]{ display:none !important; }
    .modal-card{
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
      border: var(--ring); border-radius:16px; box-shadow: var(--shadow);
      width:min(92vw, 860px); max-height:90vh; overflow-y:auto; padding:18px; position:relative;
    }
    .modal-close{
      position:absolute; top:8px; right:10px; font-size:28px; line-height:1;
      background:transparent; border:none; color:var(--text); cursor:pointer; padding:4px 8px;
      transition: transform 0.2s ease;
    }
    .modal-close:hover{ transform: scale(1.1); color:var(--accent); }
    #memoryTitle{ margin:0 0 12px; font-size:24px; }
    .memory-controls{ 
      display:flex; gap:10px; align-items:center; margin:8px 0 10px; flex-wrap:wrap;
    }
    .memory-controls label{ display:flex; align-items:center; gap:6px; }
    .memory-controls select{
      background:var(--bg2); color:var(--text); border:var(--ring); border-radius:8px;
      padding:6px 10px; font-family:inherit; cursor:pointer;
    }
    .memory-controls button{
      background:linear-gradient(145deg, var(--accent-2), #c5d3ff); color:#0f1a3a;
      border:none; border-radius:8px; padding:6px 12px; cursor:pointer; font-weight:600;
      transition: transform 0.1s ease;
    }
    .memory-controls button:active{ transform: translateY(1px); }
    .memory-stats{ color:var(--muted); margin-bottom:12px; font-size:14px; }
    .memory-stats span{ color:var(--text); font-weight:600; }
    
    .memory-grid{
      display:grid; gap:8px; user-select:none; margin-top:12px;
      min-height:200px;
      width:100%;
    }
    .memory-grid[data-mode="4x4"]{ grid-template-columns: repeat(4, minmax(56px,1fr)); }
    .memory-grid[data-mode="5x6"]{ grid-template-columns: repeat(6, minmax(44px,1fr)); }
    .memory-grid[data-mode="daily"]{ grid-template-columns: repeat(5, minmax(48px,1fr)); }
    
    .tile{
      position:relative; width:100%; padding-top: 120%;
      background:transparent; border:none; cursor:pointer; padding:0;
      min-width:44px; min-height:60px;
    }
    .tile-face{
      position:absolute; inset:0;
      display:flex; align-items:center; justify-content:center;
      border-radius:10px; border:1px solid rgba(255,255,255,.1);
      background: linear-gradient(145deg, rgba(255,255,255,.08), rgba(255,255,255,.02));
      box-shadow: 0 2px 8px rgba(0,0,0,.2);
      font-size: clamp(32px, 7vw, 52px);
      transition: background 0.2s ease, transform 0.1s ease;
      color: var(--muted);
    }
    .tile.flipped .tile-face{
      background: linear-gradient(145deg, #fff, #f0f0f0);
      color: #000;
      transform: scale(1.05);
    }
    .tile[disabled]{ cursor:not-allowed; }
    .tile[disabled] .tile-inner{ opacity:0.6; }
    
    @media (prefers-reduced-motion: reduce){
      .tile-inner{ transition:none; }
      .tile.flipped .tile-inner{ 
        transform:none; 
        background:var(--accent-2); 
      }
      .tile.flipped .tile-front{ display:none; }
      .tile.flipped .tile-back{ 
        transform:none; 
        display:flex;
        z-index:3;
      }
    }
    

    .tile:focus-visible{ outline:2px solid var(--accent); outline-offset:2px; border-radius:10px; }
    
    @keyframes victory-pulse{
      0%, 100%{ transform: scale(1); }
      50%{ transform: scale(1.05); }
    }

    ::selection{background:#ffd2ec; color:#2b0f1c}
  </style>
</head>
<body>
  <div class="sky" id="sky" aria-hidden="true"></div>

  <header>
    <div class="brand" id="brand">
      <span class="dot"></span><span>F√ºr Nadja ‚ú®</span>
      <!-- Inline-Signatur: –ù–∞–¥—è in kyrillischer Kalligrafie -->
      <svg id="inkSig" viewBox="0 0 320 80" width="140" height="35" aria-hidden="true" focusable="false">
        <!-- H (–ù) - Elegant geschwungen -->
        <path d="M20,25 L20,60 M20,42 Q30,38 40,42 M40,25 L40,60" />
        <!-- A (–ê) - Mit sch√∂nem Bogen -->
        <path d="M60,60 L75,25 L90,60 M67,48 L83,48" />
        <!-- D (–î) - Mit Serifen -->
        <path d="M110,25 L110,55 L135,55 L135,25 M105,60 L105,55 M140,60 L140,55" />
        <!-- YA (–Ø) - Elegant geschwungen -->
        <path d="M160,25 Q180,25 180,42 Q180,60 160,60 L155,60 M180,42 L180,60" />
      </svg>
    </div>
    <div class="next" id="nextInfo">N√§chstes Kompliment um 23:00 (deutsche Zeit)</div>
  </header>

  <main class="card" id="card">
    <div class="gifwrap" id="gifwrap" role="img" aria-label="Nette GIF-√úberraschung f√ºr Nadja">
      <img id="gif" alt="Tages-GIF" />
    </div>

    <h1 id="title">–ù–∞–¥–µ–Ω—å–∫–∞,</h1>
    <div class="compliment" id="compliment">–¢–≤–æ—è —É–ª—ã–±–∫–∞ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –æ–±—ã—á–Ω–æ–µ —É—Ç—Ä–æ –≤ –º–∞–ª–µ–Ω—å–∫–æ–µ —á—É–¥–æ.</div>

    <div class="meta">
      <span class="pill">‚è≥ <b id="countdown">‚Äî:‚Äî:‚Äî</b> bis zum n√§chsten Kompliment</span>
      <span class="pill">üóìÔ∏è <span id="todayLabel"></span></span>
      <button class="memory-btn" id="openMemory" type="button" aria-haspopup="dialog">üéÆ Memory</button>
    </div>

    <div class="hint">–°–æ–≤–µ—Ç: –Ω–∞–∂–º–∏ –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ –∏ –Ω–∞—Å–ª–∞–¥–∏—Å—å üíñ-—Ñ–µ–π–µ—Ä–≤–µ—Ä–∫–æ–º :3</div>
  </main>

  <!-- Emoji Memory Modal -->
  <div id="memoryOverlay" class="modal" hidden aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="memoryTitle">
    <div class="modal-card" role="document">
      <button class="modal-close" id="memoryClose" type="button" aria-label="Schlie√üen">√ó</button>
      <h2 id="memoryTitle">Emoji Memory üéÆ</h2>
      
      <div class="memory-controls">
        <label>Modus:
          <select id="memoryMode">
            <option value="daily">Daily (deterministisch)</option>
            <option value="4x4">4 √ó 4 (8 Paare)</option>
            <option value="5x6">5 √ó 6 (15 Paare)</option>
          </select>
        </label>
        <button id="memoryRestart" type="button">üîÑ Neu mischen</button>
      </div>
      
      <div id="memoryStats" class="memory-stats">
        ‚è±Ô∏è <span id="memTime">00:00</span> ‚Ä¢ üéØ Z√ºge: <span id="memMoves">0</span> ‚Ä¢ üèÜ Best: <span id="memBest">‚Äî</span>
      </div>
      <div id="memoryGrid" class="memory-grid" aria-live="polite"></div>
    </div>
  </div>

  <footer>
    <div>Mit Liebe gebaut. –¢–≤–æ—ë –º–∞–ª–µ–Ω—å–∫–æ–µ 23:00-–æ–∫–æ—à–∫–æ —Ä–∞–¥–æ—Å—Ç–∏. ‚ú®</div>
  </footer>

  <script>
    // -----------------------------
    // Config
    // -----------------------------
    const TIMEZONE = "Europe/Berlin";
    const ROTATE_HOUR = 23; // 23:00 deutscher Zeit
    const TENOR_API_KEY = "AIzaSyCCrf5nV6vaaeUnrSPzRffETe72N4sSx1k"; // Tenor API Key
    const NICKNAMES = ["–ù–∞–¥—è","–ù–∞–¥–µ–Ω—å–∫–∞","–ù–∞–¥—é—à–∞","–ù–∞–¥—é—à–∫–∞","–ù–∞–¥–µ—á–∫–∞","–ù–∞–¥–µ–∂–¥–∞ –º–æ—è","–ù–∞–¥–µ–Ω—å–∫–∞-—Å–æ–ª–Ω—ã—à–∫–æ","–ù–∞–¥—é"];
    const NAME_BASE = "–ù–∞–¥—è";
    // --------- Streak & Gamification ---------
    const STREAK_CONFIG = {
      milestones: [
        { count: 3, emoji: 'ü•â', label: '3 Tage' },
        { count: 7, emoji: 'ü•à', label: '1 Woche' },
        { count: 14, emoji: 'ü•á', label: '2 Wochen' },
        { count: 30, emoji: 'üèÜ', label: '1 Monat' },
        { count: 50, emoji: 'üí´', label: '50 Tage' },
        { count: 100, emoji: 'üëë', label: '100 Tage!' }
      ]
    };

    class StreakManager {
      constructor() {
        this.storageKey = 'nadja_streak_data';
        this.canUseStorage = this.checkStorage();
      }
      checkStorage() {
        try { const test = '__test__'; localStorage.setItem(test, test); localStorage.removeItem(test); return true; } catch (e) { return false; }
      }
      loadData() {
        if (!this.canUseStorage) return { current: 0, best: 0, lastVisit: null, milestones: [] };
        try { const raw = localStorage.getItem(this.storageKey); if (!raw) return { current: 0, best: 0, lastVisit: null, milestones: [] }; return JSON.parse(raw); } catch (e) { return { current: 0, best: 0, lastVisit: null, milestones: [] }; }
      }
      saveData(data) { if (!this.canUseStorage) return; try { localStorage.setItem(this.storageKey, JSON.stringify(data)); } catch (e) {} }
      getDayKey(nowParts) { const rotYMD = rotationYMD(nowParts); return `${rotYMD.year}-${String(rotYMD.month).padStart(2, '0')}-${String(rotYMD.day).padStart(2, '0')}`; }
      update(nowParts) {
        const data = this.loadData();
        const todayKey = this.getDayKey(nowParts);
        if (!data.lastVisit) { data.current = 1; data.best = 1; data.lastVisit = todayKey; data.milestones = this.checkNewMilestone(0, 1); this.saveData(data); return { ...data, isNewMilestone: data.milestones.length > 0 }; }
        if (data.lastVisit === todayKey) return { ...data, isNewMilestone: false };
        const lastDate = new Date(data.lastVisit + 'T00:00:00Z'); const todayDate = new Date(todayKey + 'T00:00:00Z');
        const diffMs = todayDate - lastDate; const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24)); const oldCurrent = data.current;
        if (diffDays === 1) { data.current += 1; if (data.current > data.best) { data.best = data.current; } } else { data.current = 1; }
        data.lastVisit = todayKey; const newMilestones = this.checkNewMilestone(oldCurrent, data.current);
        data.milestones = [...new Set([...(data.milestones || []), ...newMilestones])]; this.saveData(data); return { ...data, isNewMilestone: newMilestones.length > 0 };
      }
      checkNewMilestone(oldCount, newCount) { const achieved = []; STREAK_CONFIG.milestones.forEach(m => { if (newCount >= m.count && oldCount < m.count) { achieved.push(m.count); } }); return achieved; }
      getAchievedBadges(milestones) { if (!milestones || !Array.isArray(milestones)) return []; return STREAK_CONFIG.milestones.filter(m => milestones.includes(m.count)); }
    }

    const streakManager = new StreakManager();
    function renderStreakUI(streakData) {
      const metaDiv = document.querySelector('.meta'); if (!metaDiv) return;
      const oldStreakPill = document.getElementById('streakPill'); const oldBadgesDiv = document.getElementById('badgesDiv');
      if (oldStreakPill) oldStreakPill.remove(); if (oldBadgesDiv) oldBadgesDiv.remove();
      if (streakData.current === 0) return;
      const streakPill = document.createElement('span'); streakPill.id = 'streakPill'; streakPill.className = 'pill';
      streakPill.style.background = 'linear-gradient(145deg, #ff6b6b, #ff8787)'; streakPill.style.color = 'white'; streakPill.style.fontWeight = '600';
      if (streakData.isNewMilestone && !window.matchMedia('(prefers-reduced-motion: reduce)').matches) { streakPill.style.animation = 'streak-pulse 2s ease-in-out'; }
      const bestText = streakData.best > streakData.current ? ` ¬∑ Best: ${streakData.best}` : '';
      streakPill.innerHTML = 'üî• <b>Streak ' + streakData.current + '</b>' + bestText; metaDiv.appendChild(streakPill);
      const achievedBadges = streakManager.getAchievedBadges(streakData.milestones);
      if (achievedBadges.length > 0) {
        const badgesDiv = document.createElement('div'); badgesDiv.id = 'badgesDiv'; badgesDiv.style.display = 'flex'; badgesDiv.style.gap = '8px';
        badgesDiv.style.flexWrap = 'wrap'; badgesDiv.style.marginTop = '12px'; badgesDiv.style.marginBottom = '4px';
        achievedBadges.forEach(badge => {
          const badgeSpan = document.createElement('span'); badgeSpan.className = 'badge-item'; badgeSpan.style.display = 'inline-flex';
          badgeSpan.style.alignItems = 'center'; badgeSpan.style.gap = '4px'; badgeSpan.style.padding = '6px 10px'; badgeSpan.style.borderRadius = '8px';
          badgeSpan.style.background = 'rgba(255, 255, 255, 0.08)'; badgeSpan.style.border = '1px solid rgba(255, 255, 255, 0.12)';
          badgeSpan.style.fontSize = '13px'; badgeSpan.style.color = 'var(--muted)';
          badgeSpan.innerHTML = badge.emoji + ' <span style="color: var(--text); font-weight: 600;">' + badge.label + '</span>';
          badgesDiv.appendChild(badgeSpan);
        });
        metaDiv.parentElement.insertBefore(badgesDiv, metaDiv.nextSibling);
      }
    }


    // --------- Tenor API Search Terms ---------
    const TENOR_SEARCH_TERMS = {
      hearts: [
        "bubu dudu love","kakao friends heart","sanrio heart","hello kitty heart",
        "slay queen heart","queen energy cute",
        "pastel heart animation","kawaii heart sticker","sparkle heart ‚ú®","soft love aesthetic",
        "—Å–ª–∞–¥–∫–∏–µ —Å–µ—Ä–¥–µ—á–∫–∏","pastell herz √§sthetik", "cute dog"
      ],
      calm: [
        "yoga aesthetic pastel","breathing calm loop","lofi study cozy","cozy book reading",
        "soft meditation animation","calm ocean loop","serene nature aesthetic",
        "–∏–Ω—Ç—Ä–æ–≤–µ—Ä—Ç —É—é—Ç —ç—Å—Ç–µ—Ç–∏–∫–∞","ruhig √§sthetik","soft rain calm window"
      ],
      sport: [
        "bubu dudu workout","kakao friends yoga","sanrio gym cute",
        "running aesthetic girl","yoga flow pastel","stretch cute loop",
        "thrasher skate aesthetic","skateboard aesthetic loop",
        "sport motivation cute","workout sticker"
      ],
      sketch: [
        "pastel drawing loop","cute doodle notebook","sketchbook aesthetic",
        "line art animation","copic pastel draw","kawaii doodle sticker",
        "–º–∏–ª—ã–π –¥—É–¥–ª","zeichnen pastell"
      ],
      cozy: [
        "lofi girl aesthetic","cozy coffee steam","warm blanket aesthetic",
        "room ambient cozy lights","tea time cute","snuggle sticker",
        "gem√ºtlich √§sthetik","—É—é—Ç–Ω–æ —ç—Å—Ç–µ—Ç–∏–∫–∞"
      ],
      design: [
        "pastel ui design","minimalist grid aesthetic","typography aesthetic",
        "coquette design","pinterest aesthetic board","vintage style edit",
        "sanrio pastel ui","kakao friends minimal","kawaii layout"
      ],
      future: [
        "pastel galaxy","cosmic aesthetic dreamy","shooting star cute",
        "rocket kawaii","space window view","neon city dreamy",
        "berlin aesthetic night","city skyline pastel",
        "–∫–æ—Å–º–æ—Å –ø–∞—Å—Ç–µ–ª—å","kosmos √§sthetik"
      ],
      stars: [
        "sparkle stars ‚ú®","dreamy night sky","shooting star pastel",
        "moon and stars kawaii","bubu dudu stars","sanrio moon stars",
        "–∑–≤—ë–∑–¥—ã –Ω–µ–∂–Ω—ã–µ","sterne pastell"
      ],
      sun: [
        "golden hour aesthetic","soft sunlight dust","morning sun window",
        "sunbeam sparkle","bubu dudu sunshine","hello kitty sunny",
        "–∑–æ–ª–æ—Ç–æ–π —á–∞—Å —ç—Å—Ç–µ—Ç–∏–∫–∞","goldene stunde √§sthetik"
      ],
      rain: [
        "cozy rain window","rain bokeh aesthetic","umbrella cute",
        "sanrio rain","bubu dudu rain","kakao friends rain",
        "regen am fenster","–¥–æ–∂–¥—å —É –æ–∫–Ω–∞"
      ],
      cat: [
        "kawaii cat","hello kitty cute","sanrio cat","pastel kitten",
        "chonky cat cute","cat cuddle sticker","—Å–ª–∞–¥–∫–∏–π –∫–æ—Ç–∏–∫","s√º√üe katze"
      ]
    };

    // Cache & Fallbacks
    const tenorCache = {};
    const FALLBACK_GIFS = [
      "https://media.giphy.com/media/26BRv0ThflsHCqDrG/giphy.gif",
      "https://media.giphy.com/media/3oriO0OEd9QIDdllqo/giphy.gif",
      "https://media.giphy.com/media/xT9IgG50Fb7Mi0prBC/giphy.gif"
    ];

    // --------- Komplimente ---------
    const COMPLIMENTS = [
      {caption:"–í–æ—Å—Ç–æ—á–Ω–æ–µ–≤—Ä–æ–ø–µ–π—Å–∫–∞—è –∫—Ä–∞—Å–æ—Ç–∞ {NICK} üå∏", theme: "hearts", text:"–í —Ç–≤–æ–∏—Ö —á–µ—Ä—Ç–∞—Ö –ª–∏—Ü–∞ —á–∏—Ç–∞–µ—Ç—Å—è —Ü–µ–ª–∞—è –∏—Å—Ç–æ—Ä–∏—è –∫—Ä–∞—Å–æ—Ç—ã –∏ —Å–∏–ª—ã."},
      {caption:"–Ø–∑—ã–∫–æ–≤–∞—è –º–∞–≥–∏—è {NICK} üó£Ô∏è", theme: "calm", text:"–¢—ã –ø—Ä–µ–≤—Ä–∞—â–∞–µ—à—å –∏–∑—É—á–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤ –≤ –∏—Å–∫—É—Å—Å—Ç–≤–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –¥—É—à."},
      {caption:"–°–ø–æ—Ä—Ç–∏–≤–Ω–∞—è –≥—Ä–∞—Ü–∏—è {NICK} üèÉ‚Äç‚ôÄÔ∏è", theme: "sport", text:"–¢–≤–æ—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ –≤ —Å–ø–æ—Ä—Ç–µ –æ—Ç—Ä–∞–∂–∞–µ—Ç —Å–∏–ª—É —Ç–≤–æ–µ–≥–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞."},
      {caption:"–¢–≤–æ—Ä—á–µ—Å–∫–∞—è –¥—É—à–∞ {NICK} üé®", theme: "sketch", text:"–í –∫–∞–∂–¥–æ–º —Ç–≤–æ—ë–º —Ç–≤–æ—Ä–µ–Ω–∏–∏ –∂–∏–≤—ë—Ç —á–∞—Å—Ç–∏—á–∫–∞ —Ç–≤–æ–µ–≥–æ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–≥–æ –º–∏—Ä–∞."},
      {caption:"–ú—É–∑—ã–∫–∞–ª—å–Ω–æ–µ —Å–µ—Ä–¥—Ü–µ {NICK} üéµ", theme: "cozy", text:"–¢–≤–æ–π –º—É–∑—ã–∫–∞–ª—å–Ω—ã–π –≤–∫—É—Å –≥–æ–≤–æ—Ä–∏—Ç –æ –≥–ª—É–±–∏–Ω–µ —Ç–≤–æ–µ–π –¥—É—à–∏."},
      {caption:"–°—Ç–∏–ª—å–Ω–∞—è –Ω–∞—Ç—É—Ä–∞ {NICK} üëó", theme: "design", text:"–¢–≤–æ–π —Å—Ç–∏–ª—å —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –æ–¥–µ–∂–¥–∞, —ç—Ç–æ —Å–ø–æ—Å–æ–± –≤—ã—Ä–∞–∂–µ–Ω–∏—è —Å–µ–±—è."},
      {caption:"–°–µ–º–µ–π–Ω–∞—è —Ç–µ–ø–ª–æ—Ç–∞ {NICK} üë®‚Äçüë©‚Äçüëß‚Äçüë¶", theme: "cozy", text:"–õ—é–±–æ–≤—å –∫ —Å–µ–º—å–µ –¥–µ–ª–∞–µ—Ç —Ç–µ–±—è –µ—â—ë –±–æ–ª–µ–µ –æ—Å–æ–±–µ–Ω–Ω–æ–π."},
      {caption:"–ú—É–¥—Ä–æ—Å—Ç—å —Å–µ—Ä–¥—Ü–∞ {NICK} üí≠", theme: "calm", text:"–¢—ã —É–º–µ–µ—à—å –Ω–∞—Ö–æ–¥–∏—Ç—å –∫—Ä–∞—Å–æ—Ç—É –¥–∞–∂–µ –≤ —Å–∞–º—ã—Ö —Å–ª–æ–∂–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–∞—Ö."},
      {caption:"–û—Ç–∫—Ä—ã—Ç–∞—è –∫–Ω–∏–≥–∞ {NICK} üìö", theme: "sketch", text:"–¢–≤–æ—è —á–µ—Å—Ç–Ω–æ—Å—Ç—å –∏ –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å –¥–µ–ª–∞—é—Ç –æ–±—â–µ–Ω–∏–µ —Å —Ç–æ–±–æ–π –æ—Å–æ–±–µ–Ω–Ω—ã–º."},
      {caption:"–ü—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏—Ü–∞ –ø–æ –∂–∏–∑–Ω–∏ {NICK} üåç", theme: "future", text:"–ö–∞–∂–¥—ã–π —Ç–≤–æ–π –ø–µ—Ä–µ–µ–∑–¥ —ç—Ç–æ –Ω–æ–≤–∞—è –≥–ª–∞–≤–∞ —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏."},
      {caption:"–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–∏–ª–∞ {NICK} üí™", theme: "sport", text:"–¢–≤–æ—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø—Ä–∏—Å–ø–æ—Å–∞–±–ª–∏–≤–∞—Ç—å—Å—è –≤—ã–∑—ã–≤–∞–µ—Ç –∏—Å–∫—Ä–µ–Ω–Ω–µ–µ –≤–æ—Å—Ö–∏—â–µ–Ω–∏–µ."},
      {caption:"–ò–Ω—Ç—Ä–æ–≤–µ—Ä—Ç–Ω–∞—è –º–∞–≥–∏—è {NICK} üåô", theme: "calm", text:"–í —Ç–≤–æ–µ–π —Ç–∏—à–∏–Ω–µ —Å–∫—Ä—ã—Ç–∞ —Ü–µ–ª–∞—è –≤—Å–µ–ª–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –º—ã—Å–ª–µ–π."},
      {caption:"–î–∏–∑–∞–π–Ω–µ—Ä—Å–∫–æ–µ –≤–∏–¥–µ–Ω–∏–µ {NICK} üëÅÔ∏è", theme: "design", text:"–¢—ã –≤–∏–¥–∏—à—å –∫—Ä–∞—Å–æ—Ç—É —Ç–∞–º, –≥–¥–µ –¥—Ä—É–≥–∏–µ –≤–∏–¥—è—Ç –æ–±—ã–¥–µ–Ω–Ω–æ—Å—Ç—å."},
      {caption:"–ô–æ–≥–∞-—Ñ–∏–ª–æ—Å–æ—Ñ–∏—è {NICK} üßò‚Äç‚ôÄÔ∏è", theme: "calm", text:"–¢–≤–æ—è –≥–∞—Ä–º–æ–Ω–∏—è —Å —Å–æ–±–æ–π –∏–∑–ª—É—á–∞–µ—Ç—Å—è –Ω–∞ –≤—Å–µ—Ö –≤–æ–∫—Ä—É–≥."},
      {caption:"–í–∏–Ω—Ç–∞–∂–Ω–∞—è –¥—É—à–∞ {NICK} üìª", theme: "design", text:"–¢–≤–æ–π —Å—Ç–∏–ª—å —Å–æ—á–µ—Ç–∞–µ—Ç –ª—É—á—à–µ–µ –∏–∑ –ø—Ä–æ—à–ª–æ–≥–æ –∏ –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ."},
      {caption:"–¢—Ä–µ—à–µ—Ä-—ç—Å—Ç–µ—Ç–∏–∫–∞ {NICK} üõπ", theme: "sport", text:"–í —Ç–≤–æ—ë–º —Å—Ç–∏–ª–µ —á—É–≤—Å—Ç–≤—É–µ—Ç—Å—è —Å–≤–æ–±–æ–¥–∞ –∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –¥—É—Ö–∞."},
      {caption:"–ë–µ—Ä–ª–∏–Ω—Å–∫–∞—è –º–µ—á—Ç–∞ {NICK} üèôÔ∏è", theme: "future", text:"–≠—Ç–æ—Ç –≥–æ—Ä–æ–¥ —Å—Ç–∞–Ω–µ—Ç –µ—â—ë –ø—Ä–µ–∫—Ä–∞—Å–Ω–µ–µ —Å —Ç–≤–æ–∏–º –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ–º."},
      {caption:"–ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–∞—è –∫—Ä–∞—Å–æ—Ç–∞ {NICK} üåê", theme: "sketch", text:"–ö–∞–∂–¥—ã–π —è–∑—ã–∫, –∫–æ—Ç–æ—Ä—ã–π —Ç—ã –∑–Ω–∞–µ—à—å, –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–µ–±–µ –æ—á–∞—Ä–æ–≤–∞–Ω–∏—è."},
      {caption:"–ò—Å–∫—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤–∑–≥–ª—è–¥–∞ {NICK} üëÄ", theme: "hearts", text:"–í —Ç–≤–æ–∏—Ö –≥–ª–∞–∑–∞—Ö —á–∏—Ç–∞–µ—Ç—Å—è —Ç–∞–∫–∞—è —á–µ—Å—Ç–Ω–æ—Å—Ç—å –∏ –¥–æ–±—Ä–æ—Ç–∞."},
      {caption:"–¢–≤–æ—Ä—á–µ—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å {NICK} ‚úèÔ∏è", theme: "sketch", text:"–ù–∞–±–ª—é–¥–∞—Ç—å –∑–∞ —Ç–µ–º, –∫–∞–∫ —Ç—ã —Ç–≤–æ—Ä–∏—à—å, —ç—Ç–æ –Ω–∞—Å—Ç–æ—è—â–µ–µ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ."},
      {caption:"–ú—É–∑—ã–∫–∞–ª—å–Ω–∞—è —Ç–µ—Ä–∞–ø–∏—è {NICK} üéß", theme: "cozy", text:"–¢–≤–æ—è –º—É–∑—ã–∫–∞ –ª–µ—á–∏—Ç –Ω–µ —Ç–æ–ª—å–∫–æ —Ç–µ–±—è, –Ω–æ –∏ –≤—Å–µ—Ö –≤–æ–∫—Ä—É–≥."},
      {caption:"–°—Ç—Ä–µ—Å—Å–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å {NICK} üåä", theme: "calm", text:"–¢–≤–æ—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å —Ç—Ä—É–¥–Ω–æ—Å—Ç—è–º–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ—Ä–∞–∂–∞–µ—Ç."},
      {caption:"–°–µ–º–µ–π–Ω—ã–µ —Ü–µ–Ω–Ω–æ—Å—Ç–∏ {NICK} üíù", theme: "hearts", text:"–¢–≤–æ—è –ª—é–±–æ–≤—å –∫ –±–ª–∏–∑–∫–∏–º –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–æ–µ —É —Ç–µ–±—è –±–æ–ª—å—à–æ–µ —Å–µ—Ä–¥—Ü–µ."},
      {caption:"–ê–¥–∞–ø—Ç–∞—Ü–∏—è-–º–∞—Å—Ç–µ—Ä {NICK} ü¶ã", theme: "future", text:"–¢—ã –ø—Ä–µ–≤—Ä–∞—â–∞–µ—à—å –∫–∞–∂–¥—É—é –ø–µ—Ä–µ–º–µ–Ω—É –≤ –Ω–æ–≤—É—é –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å."},
      {caption:"–≠—Å—Ç–µ—Ç–∏–∫–∞ Pinterest {NICK} üìå", theme: "design", text:"–¢–≤–æ–π –≤–∫—É—Å –≤ –≤–∏–∑—É–∞–ª—å–Ω–æ–º –∏—Å–∫—É—Å—Å—Ç–≤–µ –ø—Ä–æ—Å—Ç–æ –±–µ–∑—É–ø—Ä–µ—á–µ–Ω."},
      {caption:"–°–ø–æ–Ω—Ç–∞–Ω–Ω–∞—è —Ä–∞–¥–æ—Å—Ç—å {NICK} üéâ", theme: "stars", text:"–¢–≤–æ—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Ä–∞–¥–æ–≤–∞—Ç—å—Å—è –º–µ–ª–æ—á–∞–º –∑–∞—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–∞."},
      {caption:"–õ–∏–Ω–≥–≤–∏—Å—Ç–∏—á–µ—Å–∫–∏–π —Ç–∞–ª–∞–Ω—Ç {NICK} üó£Ô∏è", theme: "sketch", text:"–¢—ã –∂–æ–Ω–≥–ª–∏—Ä—É–µ—à—å —è–∑—ã–∫–∞–º–∏ –∫–∞–∫ –Ω–∞—Å—Ç–æ—è—â–∏–π –∞—Ä—Ç–∏—Å—Ç —Å–ª–æ–≤–∞."},
      {caption:"–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–∏–ª–∞ {NICK} üíé", theme: "calm", text:"–í —Ç–µ–±–µ —Å—Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å–∏–ª—ã, —á—Ç–æ —Ö–≤–∞—Ç–∏—Ç –Ω–∞ –≤—Å–µ—Ö."},
      {caption:"–ö—É–ª—å—Ç—É—Ä–Ω—ã–π –º–æ—Å—Ç {NICK} üåâ", theme: "future", text:"–¢—ã —Å–æ–µ–¥–∏–Ω—è–µ—à—å –∫—É–ª—å—Ç—É—Ä—ã —Å–≤–æ–∏–º –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º –∏ —Ç–µ–ø–ª–æ—Ç–æ–π."},
      {caption:"–•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –Ω–∞—Ç—É—Ä–∞ {NICK} üñºÔ∏è", theme: "sketch", text:"–ö–∞–∂–¥–æ–µ —Ç–≤–æ—ë —Ç–≤–æ—Ä–µ–Ω–∏–µ –Ω–µ—Å—ë—Ç –æ—Ç–ø–µ—á–∞—Ç–æ–∫ —Ç–≤–æ–µ–π –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–π –¥—É—à–∏."},
      {caption:"–ú—É–∑—ã–∫–∞–ª—å–Ω–∞—è –∏–Ω—Ç—É–∏—Ü–∏—è {NICK} üéº", theme: "cozy", text:"–¢—ã —á—É–≤—Å—Ç–≤—É–µ—à—å –º—É–∑—ã–∫—É –Ω–µ —Ç–æ–ª—å–∫–æ —É—à–∞–º–∏, –Ω–æ –∏ —Å–µ—Ä–¥—Ü–µ–º."},
      {caption:"–°—Ç–∏–ª—å–Ω–∞—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ—Å—Ç—å {NICK} ‚ú®", theme: "design", text:"–¢–≤–æ–π —Å—Ç–∏–ª—å —ç—Ç–æ –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ —Ç–≤–æ–µ–π —É–Ω–∏–∫–∞–ª—å–Ω–æ–π –ª–∏—á–Ω–æ—Å—Ç–∏."},
      {caption:"–ñ–∏–∑–Ω–µ–Ω–Ω–∞—è –º—É–¥—Ä–æ—Å—Ç—å {NICK} ü¶â", theme: "calm", text:"–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –º–æ–ª–æ–¥–æ—Å—Ç—å, –≤ —Ç–µ–±–µ –∂–∏–≤—ë—Ç –¥—Ä–µ–≤–Ω—è—è –º—É–¥—Ä–æ—Å—Ç—å."},
      {caption:"–¢–≤–æ—Ä—á–µ—Å–∫–∞—è —ç–Ω–µ—Ä–≥–∏—è {NICK} ‚ö°", theme: "sketch", text:"–¢–≤–æ—è –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –æ—Å–≤–µ—â–∞–µ—Ç –≤—Å—ë –≤–æ–∫—Ä—É–≥ —è—Ä–∫–∏–º —Å–≤–µ—Ç–æ–º."},
      {caption:"–°–µ–º–µ–π–Ω–∞—è –≥–æ—Ä–¥–æ—Å—Ç—å {NICK} üëë", theme: "hearts", text:"–¢–≤–æ—è —Å–µ–º—å—è –º–æ–∂–µ—Ç –≥–æ—Ä–¥–∏—Ç—å—Å—è —Ç–∞–∫–æ–π —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ–π –¥–æ—á–µ—Ä—å—é."},
      {caption:"–ú–Ω–æ–≥–æ–≥—Ä–∞–Ω–Ω–∞—è –ª–∏—á–Ω–æ—Å—Ç—å {NICK} üí†", theme: "stars", text:"–í —Ç–µ–±–µ —Å—Ç–æ–ª—å–∫–æ –≥—Ä–∞–Ω–µ–π, —á—Ç–æ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –æ—Ç–∫—Ä—ã–≤–∞—é —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ."},
      {caption:"–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç {NICK} üß†", theme: "calm", text:"–¢—ã –ø–æ–Ω–∏–º–∞–µ—à—å —á—É–≤—Å—Ç–≤–∞ –ª—É—á—à–µ, —á–µ–º –º–Ω–æ–≥–∏–µ –ø—Å–∏—Ö–æ–ª–æ–≥–∏."},
      {caption:"–í–∏–∑—É–∞–ª—å–Ω–∞—è –ø–æ—ç–∑–∏—è {NICK} üì∏", theme: "design", text:"–¢–≤–æ—ë —á—É–≤—Å—Ç–≤–æ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–≥–æ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –æ–±—ã—á–Ω–æ–µ –≤ –∏—Å–∫—É—Å—Å—Ç–≤–æ."},
      {caption:"–ñ–∏–∑–Ω–µ–Ω–Ω–∞—è —Å—Ç–æ–π–∫–æ—Å—Ç—å {NICK} üå≥", theme: "future", text:"–ö–∞–∫ –¥–µ—Ä–µ–≤–æ, —Ç—ã —Ä–∞—Å—Ç—ë—à—å —Å–∏–ª—å–Ω–µ–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –±—É—Ä–∏."},
      {caption:"–ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–∞—è –º—É–¥—Ä–æ—Å—Ç—å {NICK} üîÆ", theme: "cozy", text:"–¢–≤–æ—è –∏–Ω—Ç—É–∏—Ü–∏—è –≤–µ–¥—ë—Ç —Ç–µ–±—è –ø–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –ø—É—Ç–∏ –∂–∏–∑–Ω–∏."},
      {caption:"–£—Ç—Ä–µ–Ω–Ω—è—è –º–∞–≥–∏—è –¥–ª—è {NICK} ‚ú®", theme: "sun", text:"–¢–≤–æ—è —É–ª—ã–±–∫–∞ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –æ–±—ã—á–Ω–æ–µ —É—Ç—Ä–æ –≤ –º–∞–ª–µ–Ω—å–∫–æ–µ —á—É–¥–æ."},
      {caption:"–°–µ–∫—Ä–µ—Ç–Ω–∞—è —Å—É–ø–µ—Ä—Å–∏–ª–∞ {NICK} üí´", theme: "hearts", text:"–¢—ã —É–º–µ–µ—à—å –¥–µ–ª–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –≤–µ—â–∏ –ª—ë–≥–∫–∏–º–∏, –∞ –≥—Ä—É—Å—Ç–Ω—ã–µ —Å–≤–µ—Ç–ª—ã–º–∏."},
      {caption:"–¢–≤–æ—Ä—á–µ—Å–∫–∏–π –≤–∏—Ö—Ä—å {NICK} üé®", theme: "sketch", text:"–ö–∞–∂–¥–∞—è —Ç–≤–æ—è –∏–¥–µ—è —ç—Ç–æ –º–∞–ª–µ–Ω—å–∫–∞—è –≤—Å–µ–ª–µ–Ω–Ω–∞—è, –ø–æ–ª–Ω–∞—è –∫—Ä–∞—Å–æ—Ç—ã."},
      {caption:"–î–∏–∑–∞–π–Ω–µ—Ä—Å–∫–∞—è –¥—É—à–∞ {NICK} ‚ú®", theme: "design", text:"–¢—ã –≤–∏–¥–∏—à—å –≥–∞—Ä–º–æ–Ω–∏—é —Ç–∞–º, –≥–¥–µ –¥—Ä—É–≥–∏–µ –≤–∏–¥—è—Ç —Ö–∞–æ—Å."},
      {caption:"–≠–Ω–µ—Ä–≥–∏—è –¥–≤–∏–∂–µ–Ω–∏—è {NICK} üåü", theme: "sport", text:"–¢–≤–æ—è —Ä–µ—à–∏–º–æ—Å—Ç—å –∑–∞—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–∞, —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π —Ö–æ—á–µ—Ç—Å—è –≥–æ—Ä—ã —Å–≤–µ—Ä–Ω—É—Ç—å."},
      {caption:"–£—é—Ç–Ω—ã–π –º–∏—Ä {NICK} ‚òï", theme: "cozy", text:"–í —Ç–≤–æ–∏—Ö –æ–±—ä—è—Ç–∏—è—Ö –¥–∞–∂–µ —Å–∞–º—ã–π —Ö–æ–ª–æ–¥–Ω—ã–π –¥–µ–Ω—å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç—ë–ø–ª—ã–º."},
      {caption:"–¢–∞–Ω–µ—Ü –ø–æ–¥ –¥–æ–∂–¥—ë–º {NICK} üåßÔ∏è", theme: "rain", text:"–¢—ã –Ω–∞—Ö–æ–¥–∏—à—å –∫—Ä–∞—Å–æ—Ç—É –≤ –∫–∞–∂–¥–æ–π –∫–∞–ø–ª–µ, –≤ –∫–∞–∂–¥–æ–º –º–æ–º–µ–Ω—Ç–µ."},
      {caption:"–ú–µ—á—Ç–∞—Ç–µ–ª—å–Ω–∏—Ü–∞ {NICK} üöÄ", theme: "future", text:"–¢–≤–æ–∏ –º–µ—á—Ç—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ –∫—Ä–∞—Å–∏–≤—ã, –æ–Ω–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–±—É–¥—É—Ç—Å—è."},
      {caption:"–ó–≤—ë–∑–¥–Ω–∞—è –ø—ã–ª—å {NICK} ‚≠ê", theme: "stars", text:"–¢—ã —Å–∏—è–µ—à—å —Ç–∞–∫ —è—Ä–∫–æ, —á—Ç–æ –¥–∞–∂–µ –∑–≤—ë–∑–¥—ã –∑–∞–≤–∏–¥—É—é—Ç."},
      {caption:"–ü–∞–ª–∏—Ç—Ä–∞ —á—É–≤—Å—Ç–≤ {NICK} üé®", theme: "design", text:"–¢–≤–æ—ë —Å–µ—Ä–¥—Ü–µ —ç—Ç–æ —Ü–µ–ª–∞—è —Ä–∞–¥—É–≥–∞ —ç–º–æ—Ü–∏–π –∏ –Ω–µ–∂–Ω–æ—Å—Ç–∏."},
      {caption:"–ó–∞–≤—Ç—Ä–∞—à–Ω–∏–π –¥–µ–Ω—å {NICK} üåÖ", theme: "future", text:"–ö–∞–∂–¥–æ–µ —Ç–≤–æ—ë –∑–∞–≤—Ç—Ä–∞ –±—É–¥–µ—Ç –ª—É—á—à–µ –≤—á–µ—Ä–∞—à–Ω–µ–≥–æ, —ç—Ç–æ –∑–∞–∫–æ–Ω –≤—Å–µ–ª–µ–Ω–Ω–æ–π."},
      {caption:"–•—É–¥–æ–∂–Ω–∏—Ü–∞ –∂–∏–∑–Ω–∏ {NICK} ‚úèÔ∏è", theme: "sketch", text:"–¢—ã —Ä–∏—Å—É–µ—à—å —Å—á–∞—Å—Ç—å–µ –≤ –≤–æ–∑–¥—É—Ö–µ –æ–¥–Ω–∏–º —Å–≤–æ–∏–º –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ–º."},
      {caption:"–ù–µ–∂–Ω–∞—è —Å–∏–ª–∞ {NICK} üíï", theme: "hearts", text:"–¢–≤–æ—è –¥–æ–±—Ä–æ—Ç–∞ —ç—Ç–æ –Ω–µ —Å–ª–∞–±–æ—Å—Ç—å, –∞ —Å–∞–º–∞—è –Ω–∞—Å—Ç–æ—è—â–∞—è —Å—É–ø–µ—Ä—Å–∏–ª–∞."},
      {caption:"–°–æ–ª–Ω–µ—á–Ω—ã–π –ª—É—á {NICK} ‚òÄÔ∏è", theme: "sun", text:"–î–∞–∂–µ –≤ —Å–∞–º—ã–π –ø–∞—Å–º—É—Ä–Ω—ã–π –¥–µ–Ω—å —Ç—ã –æ—Å—Ç–∞—ë—à—å—Å—è –º–æ–∏–º –ª–∏—á–Ω—ã–º —Å–æ–ª–Ω—Ü–µ–º."},
      {caption:"–ò–¥–µ–∞–ª—å–Ω—ã–π –º–æ–º–µ–Ω—Ç {NICK} ‚è∞", theme: "calm", text:"–° —Ç–æ–±–æ–π –∫–∞–∂–¥–∞—è —Å–µ–∫—É–Ω–¥–∞ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å."},
      {caption:"–§–æ—Ä–º—É–ª–∞ –∫—Ä–∞—Å–æ—Ç—ã {NICK} üìê", theme: "design", text:"–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –Ω–µ –º–æ–∂–µ—Ç –æ–±—ä—è—Å–Ω–∏—Ç—å, –ø–æ—á–µ–º—É —Ç—ã —Ç–∞–∫ –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞."},
      {caption:"–ú–µ–ª–æ–¥–∏—è –¥–Ω—è {NICK} üéµ", theme: "cozy", text:"–¢–≤–æ–π —Å–º–µ—Ö —Å–∞–º–∞—è –∫—Ä–∞—Å–∏–≤–∞—è –ø–µ—Å–Ω—è, –∫–æ—Ç–æ—Ä—É—é —è –∫–æ–≥–¥–∞-–ª–∏–±–æ —Å–ª—ã—à–∞–ª."},
      {caption:"–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ø–æ–≥–æ–¥–∞ {NICK} üå§Ô∏è", theme: "sun", text:"–£ —Ç–µ–±—è –≤–Ω—É—Ç—Ä–∏ –≤—Å–µ–≥–¥–∞ –≤–µ—Å–Ω–∞, –¥–∞–∂–µ –∫–æ–≥–¥–∞ —Å–Ω–∞—Ä—É–∂–∏ –∑–∏–º–∞."},
      {caption:"–î–∏–∑–∞–π–Ω-–º—ã—à–ª–µ–Ω–∏–µ {NICK} üí°", theme: "design", text:"–¢—ã —Å–æ–∑–¥–∞—ë—à—å –∫—Ä–∞—Å–æ—Ç—É –Ω–µ —Ç–æ–ª—å–∫–æ –≤ —Ä–∞–±–æ—Ç–µ, –Ω–æ –∏ –≤ –∂–∏–∑–Ω–∏."},
      {caption:"–ú–µ–¥–∏—Ç–∞—Ü–∏—è —Å {NICK} üßò‚Äç‚ôÄÔ∏è", theme: "calm", text:"–†—è–¥–æ–º —Å —Ç–æ–±–æ–π –º–∏—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç–∏—à–µ –∏ –¥–æ–±—Ä–µ–µ."},
      {caption:"–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –¥—É—Ö {NICK} üèÉ‚Äç‚ôÄÔ∏è", theme: "sport", text:"–¢—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ –¥–æ—Å—Ç–∏–≥–∞–µ—à—å —Ü–µ–ª–µ–π, —Ç—ã –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—à—å –¥—Ä—É–≥–∏—Ö –Ω–∞ –ø–æ–¥–≤–∏–≥–∏."},
      {caption:"–î–æ–º–∞—à–Ω–∏–π —É—é—Ç {NICK} üè†", theme: "cozy", text:"–î–æ–º —ç—Ç–æ –Ω–µ –º–µ—Å—Ç–æ, —ç—Ç–æ –æ—â—É—â–µ–Ω–∏–µ —Ç–µ–ø–ª–∞, –∫–æ—Ç–æ—Ä–æ–µ —Ç—ã –¥–∞—Ä–∏—à—å."},
      {caption:"–¢–≤–æ—Ä—á–µ—Å–∫–∏–π –±–ª–æ–∫–Ω–æ—Ç {NICK} üìù", theme: "sketch", text:"–ö–∞–∂–¥–∞—è —Ç–≤–æ—è –º—ã—Å–ª—å –¥–æ—Å—Ç–æ–π–Ω–∞ –±—ã—Ç—å –∑–∞–ø–µ—á–∞—Ç–ª—ë–Ω–Ω–æ–π –∑–æ–ª–æ—Ç—ã–º–∏ –±—É–∫–≤–∞–º–∏."},
      {caption:"–ë–µ—Ä–ª–∏–Ω—Å–∫–∏–µ –¥–æ–∂–¥–∏ –∏ {NICK} üåßÔ∏è", theme: "rain", text:"–î–∞–∂–µ —Å–µ—Ä–æ–µ –Ω–µ–±–æ –ë–µ—Ä–ª–∏–Ω–∞ –Ω–µ –º–æ–∂–µ—Ç –∑–∞—Ç–º–∏—Ç—å —Ç–≤–æ—ë —Å–∏—è–Ω–∏–µ."},
      {caption:"–ú–∞–≥–∏—è –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ {NICK} ‚ú®", theme: "hearts", text:"–¢—ã –ø—Ä–µ–≤—Ä–∞—â–∞–µ—à—å '–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ' –≤ '–∞ –ø–æ—á–µ–º—É –±—ã –∏ –Ω–µ—Ç?'."},
      {caption:"–ü–∏–∫—Å–µ–ª—å-–∞—Ä—Ç –¥—É—à–∏ {NICK} üñ•Ô∏è", theme: "design", text:"–ö–∞–∂–¥–∞—è –¥–µ—Ç–∞–ª—å –≤ —Ç–µ–±–µ –ø—Ä–æ–¥—É–º–∞–Ω–∞ –≤—Å–µ–ª–µ–Ω–Ω–æ–π –¥–æ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–∞."},
      {caption:"–ù–∞–±—Ä–æ—Å–æ–∫ —Å—á–∞—Å—Ç—å—è {NICK} ‚úèÔ∏è", theme: "sketch", text:"–¢–≤–æ—ë —Å—á–∞—Å—Ç—å–µ –∑–∞—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ, –æ–Ω–æ —Ä–∏—Å—É–µ—Ç —É–ª—ã–±–∫–∏ –Ω–∞ –ª–∏—Ü–∞—Ö –¥—Ä—É–≥–∏—Ö."},
      {caption:"–ò—Å—Ç–æ—Ä–∏—è –ª—é–±–≤–∏ {NICK} üíï", theme: "hearts", text:"–ö–∞–∂–¥—ã–π –¥–µ–Ω—å —Å —Ç–æ–±–æ–π —ç—Ç–æ –Ω–æ–≤–∞—è –≥–ª–∞–≤–∞ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏."},
      {caption:"–ü—Ä–∞–∑–¥–Ω–∏–∫ –≤ –±—É–¥–Ω–∏ {NICK} üéâ", theme: "stars", text:"–¢—ã —É–º–µ–µ—à—å –ø—Ä–µ–≤—Ä–∞—â–∞—Ç—å –æ–±—ã—á–Ω—ã–π –¥–µ–Ω—å –≤ –Ω–µ–∑–∞–±—ã–≤–∞–µ–º–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ."},
      {caption:"–ö—Ä–æ—Å—Å–æ–≤–∫–∏ –∏ –º–µ—á—Ç—ã {NICK} üëü", theme: "sport", text:"–ö–∞–∂–¥—ã–π —Ç–≤–æ–π —à–∞–≥ –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç —Ç–µ–±—è –∫ —á–µ–º—É-—Ç–æ —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ–º—É."},
      {caption:"–ó–∏–º–Ω–µ–µ —Ç–µ–ø–ª–æ {NICK} ‚ùÑÔ∏è", theme: "cozy", text:"–¢—ã —Ç–æ—Ç —Å–∞–º—ã–π –≥–æ—Ä—è—á–∏–π —á–∞–π –≤ —Ö–æ–ª–æ–¥–Ω—ã–π –¥–µ–Ω—å, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–≥—Ä–µ–≤–∞–µ—Ç –¥—É—à—É."},
      {caption:"–ö–æ—Å–º–∏—á–µ—Å–∫–∏–µ –ø–ª–∞–Ω—ã {NICK} üöÄ", theme: "future", text:"–¢–≤–æ—ë –±—É–¥—É—â–µ–µ —Å–∏—è–µ—Ç —è—Ä—á–µ –ª—é–±–æ–π –∑–≤–µ–∑–¥—ã –≤–æ –≤—Å–µ–ª–µ–Ω–Ω–æ–π."},
      {caption:"–ê—É—Ç–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å {NICK} üåü", theme: "hearts", text:"–ë—ã—Ç—å —Å–æ–±–æ–π —Ç–≤–æ—è —Å—É–ø–µ—Ä—Å–∏–ª–∞, –∏ —Ç—ã –≤–ª–∞–¥–µ–µ—à—å –µ—é –≤ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–µ."},
      {caption:"–ó–≤—ë–∑–¥–Ω–æ–µ –∂–µ–ª–∞–Ω–∏–µ {NICK} ‚≠ê", theme: "stars", text:"–ü—É—Å—Ç—å –∫–∞–∂–¥–æ–µ —Ç–≤–æ—ë –∂–µ–ª–∞–Ω–∏–µ –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º –ø–∞–¥–∞—é—â–∞—è –∑–≤–µ–∑–¥–∞."},
      {caption:"–¶–∏—Ñ—Ä–æ–≤–∞—è –º–∞–≥–∏—è {NICK} üíª", theme: "design", text:"–¢—ã –æ–∂–∏–≤–ª—è–µ—à—å –ø–∏–∫—Å–µ–ª–∏ –∏ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—à—å –∫–æ–¥ –≤ –∏—Å–∫—É—Å—Å—Ç–≤–æ."},
      {caption:"–°–æ–ª–Ω–µ—á–Ω—ã–π –ø—Ä–æ—Ä—ã–≤ {NICK} ‚òÄÔ∏è", theme: "sun", text:"–¢—ã —Ç–æ—Ç —Å–∞–º—ã–π –ª—É—á —Å–≤–µ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–±–∏–≤–∞–µ—Ç—Å—è —Å–∫–≤–æ–∑—å —Ç—É—á–∏."},
      {caption:"–ó–æ–ª–æ—Ç–æ–µ —Å–µ—á–µ–Ω–∏–µ {NICK} üìè", theme: "design", text:"–í —Ç–µ–±–µ –∏–¥–µ–∞–ª—å–Ω–æ —Å–æ—á–µ—Ç–∞—é—Ç—Å—è –∫—Ä–∞—Å–æ—Ç–∞, —É–º –∏ –¥–æ–±—Ä–æ—Ç–∞."},
      {caption:"–û–±—ä—è—Ç–∏—è —Ç–∏—à–∏–Ω—ã {NICK} ü§ó", theme: "cozy", text:"–ò–Ω–æ–≥–¥–∞ –ª—É—á—à–∏–µ –º–æ–º–µ–Ω—Ç—ã —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –º–æ–ª—á–∞–Ω–∏–µ —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π."},
      {caption:"–í–æ–ª—à–µ–±—Å—Ç–≤–æ –æ–±—ã—á–Ω–æ–≥–æ {NICK} ‚ú®", theme: "stars", text:"–¢—ã –Ω–∞—Ö–æ–¥–∏—à—å —á—É–¥–µ—Å–∞ –≤ —Å–∞–º—ã—Ö –ø—Ä–æ—Å—Ç—ã—Ö –≤–µ—â–∞—Ö, –∏ —ç—Ç–æ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ."},
      {caption:"–ö–æ—Ç–∏–∫–∏ –∏ –∫–æ–º—Ñ–æ—Ä—Ç {NICK} üê±", theme: "cat", text:"–¢–≤–æ—è –Ω–µ–∂–Ω–æ—Å—Ç—å –º–æ–∂–µ—Ç —Ä–∞—Å—Ç–æ–ø–∏—Ç—å –¥–∞–∂–µ —Å–∞–º–æ–µ —Ö–æ–ª–æ–¥–Ω–æ–µ —Å–µ—Ä–¥—Ü–µ."},
      {caption:"–ì–ª—É–±–æ–∫–∏–µ –≤–æ–¥—ã {NICK} üåä", theme: "calm", text:"–í —Ç–≤–æ–µ–π –¥—É—à–µ —Å—Ç–æ–ª—å–∫–æ –≥–ª—É–±–∏–Ω—ã –∏ –º—É–¥—Ä–æ—Å—Ç–∏, —Ü–µ–ª—ã–π –æ–∫–µ–∞–Ω."},
      {caption:"–ö—Ä–µ–∞—Ç–∏–≤–Ω–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è {NICK} üî¨", theme: "design", text:"–ö–∞–∂–¥–∞—è —Ç–≤–æ—è –∏–¥–µ—è —ç—Ç–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–¥–∞—Å—Ç—Å—è."},
      {caption:"–í–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–∫—Ä—ã—Ç–∏—è {NICK} ‚ùì", theme: "future", text:"–¢–≤–æ—ë –ª—é–±–æ–ø—ã—Ç—Å—Ç–≤–æ —ç—Ç–æ –∫–æ–º–ø–∞—Å, –∫–æ—Ç–æ—Ä—ã–π –≤–µ–¥—ë—Ç –∫ —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω—ã–º –æ—Ç–∫—Ä—ã—Ç–∏—è–º."},
      {caption:"–§–µ–≤—Ä–∞–ª—å—Å–∫–æ–µ —á—É–¥–æ {NICK} üíù", theme: "cozy", text:"–î–∞–∂–µ —Å–∞–º—ã–π –∫–æ—Ä–æ—Ç–∫–∏–π –º–µ—Å—è—Ü —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–º, –∫–æ–≥–¥–∞ –ø—Ä–æ–≤–æ–¥–∏—à—å –µ–≥–æ —Å —Ç–æ–±–æ–π."},
      {caption:"–ó–∞–≤—Ç—Ä–∞ –≤ —Ç–≤–æ–∏—Ö —Ä—É–∫–∞—Ö {NICK} üåÖ", theme: "sun", text:"–ë—É–¥—É—â–µ–µ –Ω–µ –º–æ–∂–µ—Ç –¥–æ–∂–¥–∞—Ç—å—Å—è –≤—Å—Ç—Ä–µ—á–∏ —Å —Ç–æ–±–æ–π, –æ–Ω–æ —É–∂–µ –≤–ª—é–±–ª–µ–Ω–æ."},
      {caption:"–≠–Ω–µ—Ä–≥–∏—è –¥–≤–∏–∂–µ–Ω–∏—è {NICK} ‚ö°", theme: "sport", text:"–¢–≤–æ—è —ç–Ω–µ—Ä–≥–∏—è –∑–∞—Ä—è–∂–∞–µ—Ç –≤—Å–µ—Ö –≤–æ–∫—Ä—É–≥ –Ω–∞ –ø–æ–¥–≤–∏–≥–∏ –∏ –º–µ—á—Ç—ã."},
      {caption:"–ö–∞—Ä–∞–Ω–¥–∞—à–Ω—ã–µ –º–µ—á—Ç—ã {NICK} ‚úèÔ∏è", theme: "sketch", text:"–ö–∞–∂–¥—ã–π —Ç–≤–æ–π —Ä–∏—Å—É–Ω–æ–∫ —ç—Ç–æ –æ–∫–Ω–æ –≤ –º–∏—Ä, –≥–¥–µ –≤—Å—ë –≤–æ–∑–º–æ–∂–Ω–æ."},
      {caption:"–†–µ—Ü–µ–ø—Ç —Å—á–∞—Å—Ç—å—è {NICK} üìñ", theme: "cozy", text:"–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –ø—Ä–æ—Å—Ç—ã–µ: —Ç–≤–æ—è —É–ª—ã–±–∫–∞, —Ç—ë–ø–ª—ã–π —á–∞–π –∏ –Ω–µ–º–Ω–æ–≥–æ –≤–æ–ª—à–µ–±—Å—Ç–≤–∞."}
    ];

    // -----------------------------
    // Time helpers
    // -----------------------------
    const fmtFull = new Intl.DateTimeFormat('en-CA', {
      timeZone: TIMEZONE, hour12:false,
      year:'numeric', month:'2-digit', day:'2-digit',
      hour:'2-digit', minute:'2-digit', second:'2-digit'
    });
    function partsFrom(date){
      const p = {};
      for (const part of fmtFull.formatToParts(date)){ p[part.type] = part.value; }
      ['year','month','day','hour','minute','second'].forEach(k => p[k] = parseInt(p[k],10));
      return p;
    }
    function labelForToday(){
      const p = partsFrom(new Date());
      const days = ["So","Mo","Di","Mi","Do","Fr","Sa"];
      const d = new Date(p.year, p.month-1, p.day);
      return `${days[d.getDay()]} ${String(p.day).padStart(2,'0')}.${String(p.month).padStart(2,'0')}.${p.year}`;
    }
    function previousYMD(p){
      const d = new Date(Date.UTC(p.year, p.month-1, p.day));
      d.setUTCDate(d.getUTCDate()-1);
      return { year:d.getUTCFullYear(), month:d.getUTCMonth()+1, day:d.getUTCDate() };
    }
    function rotationYMD(nowParts){
      // "Tag" beginnt um 23:00 Berlin ‚Äì vor 23:00 geh√∂rt noch zum Vortag
      if(nowParts.hour < ROTATE_HOUR){
        return previousYMD(nowParts);
      }
      return {year: nowParts.year, month: nowParts.month, day: nowParts.day};
    }
    function dayIndex(ymd){
      const ms = Date.UTC(ymd.year, ymd.month-1, ymd.day);
      const day = Math.floor(ms / 86400000);
      const n = COMPLIMENTS.length;
      return ((day % n) + n) % n;
    }
    function nextRotationParts(nowParts){
      let y = nowParts.year, m = nowParts.month, d = nowParts.day;
      if(nowParts.hour >= ROTATE_HOUR) {
        const dt = new Date(Date.UTC(y, m-1, d));
        dt.setUTCDate(dt.getUTCDate()+1);
        y = dt.getUTCFullYear(); m = dt.getUTCMonth()+1; d = dt.getUTCDate();
      }
      return {year:y, month:m, day:d, hour:ROTATE_HOUR, minute:0, second:0};
    }
    function roughCountdown(nowParts, targetParts){
      const toSec = p => p.hour*3600 + p.minute*60 + p.second;
      let days = 0;
      let ns = toSec(nowParts);
      let ts = toSec(targetParts);
      if(nowParts.year===targetParts.year && nowParts.month===targetParts.month && nowParts.day===targetParts.day){
        if(ts < ns){ days = 1; }
      } else {
        days = 1;
      }
      let secs = (days*24*3600 - ns + ts);
      if(secs < 0) secs = 0;
      const h = Math.floor(secs/3600);
      const m = Math.floor((secs%3600)/60);
      const s = secs%60;
      return {h,m,s};
    }
    function fill(str, nick){ return (str||"").replaceAll("{NICK}", nick || NAME_BASE); }

    // -----------------------------
    // Tenor API
    // -----------------------------
    async function fetchTenorGifs(theme, dayIndex) {
      const cacheKey = `${theme}_${dayIndex}`;
      if (tenorCache[cacheKey]) return tenorCache[cacheKey];

      const terms = TENOR_SEARCH_TERMS[theme] || TENOR_SEARCH_TERMS.hearts;
      const searchTerm = terms[dayIndex % terms.length];

      try {
        const url = `https://tenor.googleapis.com/v2/search?q=${encodeURIComponent(searchTerm)}&key=${TENOR_API_KEY}&client_key=nadja_compliments&limit=50&media_filter=gif&contentfilter=high&ar_range=standard`;
        const response = await fetch(url);
        if (!response.ok) throw new Error(`Tenor API Error: ${response.status}`);

        const data = await response.json();
        const filtered = data.results?.filter(r => {
          const gif = r.media_formats?.gif;
          if (!gif) return false;
          const w = parseInt(gif.dims?.[0])||0, h = parseInt(gif.dims?.[1])||0;
          if (w && h) {
            const ratio = w/h; if (ratio < 0.5 || ratio > 3) return false;
          }
          const size = parseInt(gif.size)||0; if (size > 5000000) return false;
          return true;
        }).map(r => r.media_formats.gif.url) || [];

        tenorCache[cacheKey] = filtered;
        return filtered;
      } catch (e) {
        console.warn('Tenor API failed:', e);
        return FALLBACK_GIFS;
      }
    }

    async function selectGifForDay(theme, dayIndex) {
      const gifs = await fetchTenorGifs(theme, dayIndex);
      if (!gifs.length) return FALLBACK_GIFS[dayIndex % FALLBACK_GIFS.length];
      return gifs[dayIndex % gifs.length];
    }

    // -----------------------------
    // UI logic
    // -----------------------------
    const elTitle = document.getElementById('title');
    const elCompliment = document.getElementById('compliment');
    const elCountdown = document.getElementById('countdown');
    const elToday = document.getElementById('todayLabel');
    const elNextInfo = document.getElementById('nextInfo');
    const elGif = document.getElementById('gif');

    function selectNick(idx){ return NICKNAMES[idx % NICKNAMES.length] || NAME_BASE; }

    function tryLoadGif(url){
      const img = new Image();
      img.onload = ()=>{
        const gifWidth = img.naturalWidth;
        const gifHeight = img.naturalHeight;
        const containerWidth = elGif.parentElement.clientWidth;
        const aspectRatio = gifWidth / gifHeight;
        let optimalHeight = containerWidth / aspectRatio;
        optimalHeight = Math.max(200, Math.min(400, optimalHeight));
        elGif.parentElement.style.height = optimalHeight + 'px';
        elGif.src = url;
        elGif.style.opacity = '1';
      };
      img.onerror = ()=>{
        elGif.parentElement.style.height = '300px';
        elGif.src = FALLBACK_GIFS[0];
        elGif.style.opacity = '1';
      };
      elGif.style.opacity = '0.5';
      img.src = url;
    }

    async function updateUI(forceIndex){
      const now = new Date();
      const nowParts = partsFrom(now);
      const activeYMD = rotationYMD(nowParts);
      const baseIdx = dayIndex(activeYMD);
      const idx = (typeof forceIndex==='number') ? ((forceIndex % COMPLIMENTS.length)+COMPLIMENTS.length)%COMPLIMENTS.length : baseIdx;

      const nick = selectNick(idx);
      const item = COMPLIMENTS[idx];

      elTitle.textContent = `${nick},`;
      elCompliment.textContent = item.text;
      elToday.textContent = labelForToday();

      try {
        const gifUrl = await selectGifForDay(item.theme, idx);
        tryLoadGif(gifUrl);
      } catch (e) {
        console.warn('Failed to load Tenor GIF:', e);
        tryLoadGif(FALLBACK_GIFS[idx % FALLBACK_GIFS.length]);
      }

      const target = nextRotationParts(nowParts);
      const dd = roughCountdown(nowParts, target);
      elCountdown.textContent = `${String(dd.h).padStart(2,'0')}:${String(dd.m).padStart(2,'0')}:${String(dd.s).padStart(2,'0')}`;
elNextInfo.textContent = `N√§chstes Kompliment um ${String(ROTATE_HOUR).padStart(2,'0')}:00 (${TIMEZONE.replace('Europe/','')})`;

      // Streak Update
      const streakData = streakManager.update(nowParts);
      renderStreakUI(streakData);;
    }

    // tick
    let previewOffset = 0;
    setInterval(()=>{
      const nowParts = partsFrom(new Date());
      const realIdx = dayIndex(rotationYMD(nowParts));
      updateUI(realIdx + previewOffset);

      // harte Umschalt-Logik exakt bei 23:00 Berlin
      if(nowParts.hour===ROTATE_HOUR && nowParts.minute===0 && nowParts.second===0){
        previewOffset = 0;
        updateUI();
      }
    }, 1000);

    // Resize-Handler
    window.addEventListener('resize', ()=>{
      const currentGif = elGif.src;
      if(currentGif && !currentGif.includes('data:')) {
        tryLoadGif(currentGif);
      }
    });

    // hearts on click
    window.addEventListener('pointerdown', e=>{ makeHeart(e.clientX, e.clientY); });
    function makeHeart(x,y){
      const el = document.createElement('div');
      el.className='heart';
      el.textContent = Math.random() < .5 ? '‚ù§Ô∏è' : 'üíñ';
      el.style.left = x+'px'; el.style.top = y+'px';
      el.style.zIndex = 1000;
      document.body.appendChild(el);
      setTimeout(()=> el.remove(), 950);
    }

    // ‚ú® background stars
    (function makeStars(){
      const sky = document.getElementById('sky');
      const count = 38;
      for(let i=0;i<count;i++){
        const s = document.createElement('span');
        s.className = 'star';
        s.textContent = '‚ú®';
        const size = (Math.random()*22)+10;
        const left = Math.random()*100;
        const dur = 22 + Math.random()*34;
        const delay = Math.random()*-dur;
        s.style.left = left+'vw';
        s.style.fontSize = size+'px';
        s.style.animationDuration = `${dur}s, ${6 + Math.random()*6}s`;
        s.style.animationDelay = `${delay}s, ${Math.random()*2}s`;
        s.style.opacity = (0.55 + Math.random()*0.4).toFixed(2);
        sky.appendChild(s);
      }
    })();

    // initial load
    updateUI();

    // ===== Tinten-Kalligrafie Animation =====
    function initInkSignature(){
      const svg = document.getElementById('inkSig');
      if(!svg) return;
      
      const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      
      // L√§nge pro Pfad berechnen ‚Üí dasharray/offset setzen
      const paths = svg.querySelectorAll('path');
      paths.forEach(p=>{
        try{
          const len = Math.max(1, Math.round(p.getTotalLength()));
          p.style.setProperty('--len', len);
          p.style.strokeDasharray = String(len);
          p.style.strokeDashoffset = String(len);
        }catch(e){}
      });
      
      function play(){
        if(reduce){
          // Keine Animation: direkt "fertig"
          svg.classList.remove('ink-anim');
          svg.classList.add('done');
          paths.forEach(p=>{ p.style.strokeDashoffset = '0'; });
          return;
        }
        svg.classList.remove('done');
        svg.classList.remove('ink-anim');
        void svg.offsetWidth; // reflow zum Neustarten
        svg.classList.add('ink-anim');
        // Nach Ende leichten Glow setzen
        setTimeout(()=>{ svg.classList.add('done'); }, 2300);
      }
      
      // Initial starten
      play();
      
      // Re-ink bei Klick auf Brand
      document.getElementById('brand')?.addEventListener('pointerdown', (e)=>{
        // Nur triggern wenn nicht auf Button geklickt
        if(!e.target.closest('button')){
          play();
        }
      });
    }
    
    // Nach DOM-Load initialisieren
    initInkSignature();


    // ===== Emoji Memory Game =====
    const memoryUI = {
      openBtn: document.getElementById('openMemory'),
      overlay: document.getElementById('memoryOverlay'),
      closeBtn: document.getElementById('memoryClose'),
      modeSel: document.getElementById('memoryMode'),
      restartBtn: document.getElementById('memoryRestart'),
      grid: document.getElementById('memoryGrid'),
      time: document.getElementById('memTime'),
      moves: document.getElementById('memMoves'),
      best: document.getElementById('memBest'),
    };
    let memoryState = null;
    let lastFocusEl = null;

    const EMOJI_POOL = [
      // Tiere - s√º√ü & niedlich
      'üê±','üêà','üêà‚Äç‚¨õ','üêï','üê∂','üêï‚Äçü¶∫','üê©','üê∞','üêá','üêπ','üê≠','üêª','üêª‚Äç‚ùÑÔ∏è','üß∏',
      'üêº','üê®','üêØ','ü¶Å','üêÆ','üê∑','üê∏','üêµ','üêî','üêß','üê¶','ü¶Ü','ü¶â','ü¶Ñ','üê¥',
      'ü¶ã','üêù','üêû','üêå','ü¶î','üêæ','ü¶ä','üêô',
      
      // Herzen - verschiedene Farben & Styles
      'üíñ','üíù','üíò','üíï','üíó','üíì','üíû','üíú','üíô','üíö','üß°','üíõ','ü§ç','üñ§','ü§é',
      '‚ù§Ô∏è','‚ù£Ô∏è','üíü','üíå',
      
      // Essen & Trinken - s√º√ü & lecker
      'üçì','üçí','üçë','üçä','üçã','üçå','üçâ','üçá','üçé','üçè','ü•ù','üçê','ü´ê',
      'üç∞','üßÅ','üç™','üç©','üç≠','üç¨','üç´','üçÆ','üçØ','üéÇ',
      '‚òï','üçµ','üßÉ','ü•§','üßã',
      
      // Natur & Blumen
      'üå∏','üå∫','üåª','üå∑','üåπ','ü•Ä','üèµÔ∏è','üíê','üåº','üåæ','üçÄ','üåø','üå±',
      'üåà','‚≠ê','‚ú®','üí´','üåü','‚ö°','‚òÄÔ∏è','üåô','üåù','‚òÅÔ∏è','üå§Ô∏è',
      
      // Aktivit√§ten & Objekte
      'üéÄ','üéÅ','üéà','üéâ','üéä','üéµ','üé∂','üéß','üé®','üñåÔ∏è','‚úèÔ∏è','üìö','üìñ',
      'üß∂','ü™°','ü™¢','üßµ','ü™Ñ','üîÆ','üíé','üëë','ü¶¢',
      
      // Smileys - fr√∂hlich & s√º√ü
      'üòä','üòÑ','üòÅ','ü•∞','üòç','ü§ó','üòò','üòö','üòô','ü•≥','üòá','ü§©','üòª',
      'üò∏','üò∫','üòΩ','üôÄ','üòº','üòπ','üòæ',
      
      // Sonstiges s√º√ü
      'üç¶','üßä','üå†','ü™ê','üåè','üé™','üé≠','üé¨','üì∑','üåÉ','üéá','üéÜ'
    ];

    function ymdToStr(ymd){ return `${ymd.year}-${String(ymd.month).padStart(2,'0')}-${String(ymd.day).padStart(2,'0')}`; }

    function seededRng(seedStr){
      let h=1779033703^seedStr.length;
      for(let i=0;i<seedStr.length;i++){ h = Math.imul(h^seedStr.charCodeAt(i), 3432918353); h = (h<<13)|(h>>>19); }
      return ()=>{ h = Math.imul(h^ (h>>>16), 2246822507); h = Math.imul(h^ (h>>>13), 3266489909); const t = (h^ (h>>>16))>>>0; return t/4294967296; };
    }

    function deckForMode(mode){
      let cols, rows, pairs;
      if(mode==='4x4'){ cols=4; rows=4; pairs=8; }
      else if(mode==='5x6'){ cols=6; rows=5; pairs=15; }
      else { cols=5; rows=4; pairs=10; }

      const now = new Date();
      const ymd = rotationYMD(partsFrom(now));
      const seed = (mode==='daily') ? `daily-${ymdToStr(ymd)}` : `free-${mode}-${now.getTime()}`;
      const rnd = seededRng(seed);

      const candidates = [...EMOJI_POOL];
      for(let i=candidates.length-1;i>0;i--){ const j = Math.floor(rnd()*(i+1)); [candidates[i],candidates[j]]=[candidates[j],candidates[i]]; }
      const pick = candidates.slice(0,pairs);
      const deck = [...pick, ...pick].map((e,i)=>({id:i, emoji:e}));
      for(let i=deck.length-1;i>0;i--){ const j = Math.floor(rnd()*(i+1)); [deck[i],deck[j]]=[deck[j],deck[i]]; }
      return {cols,rows,deck};
    }

    function fmtTime(sec){ const m=Math.floor(sec/60), s=sec%60; return `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`; }

    function bestKey(mode){ return `nadja.memory.best.${mode}`; }
    function loadBest(mode){
      try{ return JSON.parse(localStorage.getItem(bestKey(mode))||'null'); }catch(e){ return null; }
    }
    function saveBest(mode, data){
      try{ localStorage.setItem(bestKey(mode), JSON.stringify(data)); }catch(e){}
    }

    function renderGrid(mode){
      const {cols,rows,deck} = deckForMode(mode);
      console.log('Rendering grid:', {mode, cols, rows, deckLength: deck.length});
      memoryUI.grid.dataset.mode = mode;
      memoryUI.grid.style.gridTemplateColumns = `repeat(${cols}, minmax(44px,1fr))`;
      memoryUI.grid.innerHTML = '';

      memoryState = { mode, cols, rows, deck, first:null, lock:false, moves:0, time:0, timer:null, matched:0, started:false };

      deck.forEach((card,idx)=>{
        console.log(`Card ${idx}:`, card.emoji);
        
        const tile = document.createElement('button');
        tile.className = 'tile';
        tile.type = 'button';
        tile.setAttribute('aria-label', 'Verdeckt');
        tile.setAttribute('data-idx', String(idx));
        tile.setAttribute('data-emoji', card.emoji); // Speichere Emoji als data-Attribut
        
        const face = document.createElement('div');
        face.className = 'tile-face';
        face.textContent = '‚òÖ'; // Start mit Stern
        
        tile.appendChild(face);
        
        tile.addEventListener('click', onFlip);
        tile.addEventListener('keydown', e=>{ 
          if(e.code==='Enter'||e.code==='Space') { 
            e.preventDefault(); 
            tile.click(); 
          }
        });
        
        memoryUI.grid.appendChild(tile);
      });
      
      console.log('Created tiles:', memoryUI.grid.children.length);
      console.log('Grid HTML:', memoryUI.grid.innerHTML.substring(0, 200));

      memoryUI.moves.textContent = '0';
      memoryUI.time.textContent = '00:00';
      const best = loadBest(mode);
      memoryUI.best.textContent = best ? `${best.moves} / ${fmtTime(best.time)}` : '‚Äî';
    }

    function startTimer(){
      if(memoryState.started) return;
      memoryState.started = true;
      memoryState.timer = setInterval(()=>{
        memoryState.time += 1;
        memoryUI.time.textContent = fmtTime(memoryState.time);
      }, 1000);
    }

    function stopTimer(){
      if(memoryState.timer){ clearInterval(memoryState.timer); memoryState.timer = null; }
    }

    function onFlip(e){
      const tile = e.currentTarget;
      if(memoryState.lock || tile.disabled) return;
      const idx = parseInt(tile.getAttribute('data-idx'),10);
      const card = memoryState.deck[idx];
      const emoji = tile.getAttribute('data-emoji');

      if(!memoryState.started) startTimer();
      if(tile.classList.contains('flipped')) return;

      tile.classList.add('flipped');
      // Zeige Emoji direkt!
      const face = tile.querySelector('.tile-face');
      face.textContent = emoji;
      tile.setAttribute('aria-label', emoji);

      if(!memoryState.first){
        memoryState.first = {idx, tile, emoji: card.emoji};
        return;
      }

      if(memoryState.first.idx === idx) return;

      memoryState.lock = true;
      memoryState.moves += 1;
      memoryUI.moves.textContent = String(memoryState.moves);

      const first = memoryState.first;
      const second = {idx, tile, emoji: card.emoji};

      const isMatch = first.emoji === second.emoji;
      const settle = ()=>{
        if(!isMatch){
          // Zur√ºcksetzen: Stern wieder anzeigen
          first.tile.classList.remove('flipped');
          second.tile.classList.remove('flipped');
          first.tile.querySelector('.tile-face').textContent = '‚òÖ';
          second.tile.querySelector('.tile-face').textContent = '‚òÖ';
          first.tile.setAttribute('aria-label','Verdeckt');
          second.tile.setAttribute('aria-label','Verdeckt');
        } else {
          first.tile.disabled = true;
          second.tile.disabled = true;
          memoryState.matched += 2;
          
          if(memoryState.matched === memoryState.deck.length){
            stopTimer();
            const best = loadBest(memoryState.mode);
            const better = !best || memoryState.moves < best.moves || (memoryState.moves===best.moves && memoryState.time < best.time);
            if(better) saveBest(memoryState.mode, {moves: memoryState.moves, time: memoryState.time});

            if(window.matchMedia('(prefers-reduced-motion: no-preference)').matches){
              memoryUI.grid.style.animation = 'victory-pulse 0.6s ease-in-out';
              setTimeout(()=> memoryUI.grid.style.animation = '', 600);
            }
            
            const nb = loadBest(memoryState.mode);
            memoryUI.best.textContent = nb ? `${nb.moves} / ${fmtTime(nb.time)}` : '‚Äî';
            
            setTimeout(()=>{
              alert(`üéâ Gewonnen! Z√ºge: ${memoryState.moves}, Zeit: ${fmtTime(memoryState.time)}`);
            }, 300);
          }
        }
        memoryState.first = null;
        memoryState.lock = false;
      };

      const delay = isMatch ? 220 : (window.matchMedia('(prefers-reduced-motion: reduce)').matches ? 0 : 620);
      setTimeout(settle, delay);
    }

    function openMemory(){
      lastFocusEl = document.activeElement;
      memoryUI.overlay.hidden = false;
      memoryUI.overlay.setAttribute('aria-hidden','false');
      memoryUI.closeBtn.focus();
      renderGrid(memoryUI.modeSel.value);
    }

    function closeMemory(){
      memoryUI.overlay.hidden = true;
      memoryUI.overlay.setAttribute('aria-hidden','true');
      stopTimer();
      if(lastFocusEl && lastFocusEl.focus) lastFocusEl.focus();
    }

    // Debug: Check if elements exist
    console.log('Memory elements:', {
      openBtn: memoryUI.openBtn,
      overlay: memoryUI.overlay,
      closeBtn: memoryUI.closeBtn
    });

    if(memoryUI.openBtn){
      memoryUI.openBtn.addEventListener('click', openMemory);
      console.log('Memory button click listener attached');
    } else {
      console.error('Memory button not found!');
    }
    
    if(memoryUI.closeBtn){
      memoryUI.closeBtn.addEventListener('click', closeMemory);
    }
    
    if(memoryUI.modeSel){
      memoryUI.modeSel.addEventListener('change', ()=>renderGrid(memoryUI.modeSel.value));
    }
    
    if(memoryUI.restartBtn){
      memoryUI.restartBtn.addEventListener('click', ()=>renderGrid(memoryUI.modeSel.value));
    }
    
    document.addEventListener('keydown', e=>{ 
      if(!memoryUI.overlay.hidden && e.key==='Escape') closeMemory(); 
    });

  </script>

</body>
</html>
