<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>F√ºr –ù–∞–¥—è ‚ú® | Dein Tageskompliment</title>
  <meta name="description" content="Ein kleines t√§gliches Kompliment ‚Äì jeden Tag um 14:00 Uhr deutscher Zeit, nur f√ºr Nadja." />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg: #0b0c12;
      --bg2:#11131b;
      --text:#f7f7fb;
      --muted:#b9bfd3;
      --accent:#ff80bf;
      --accent-2:#9bb8ff;
      --glass: rgba(255,255,255,0.06);
      --blur: 14px;
      --ring: 1px solid rgba(255,255,255,0.12);
      --shadow: 0 10px 30px rgba(0,0,0,0.35);
      --maxw: 820px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: radial-gradient(1200px 800px at 20% -10%, #1a1533 0%, transparent 60%),
                  radial-gradient(1200px 800px at 120% 110%, #13233f 0%, transparent 60%),
                  var(--bg);
      color:var(--text);
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
      line-height:1.6;
      overflow-x:hidden;
    }
    /* ‚ú® floating background */
    .sky{position:fixed; inset:0; overflow:hidden; z-index:-1; filter:blur(1.2px)}
    .star{
      position:absolute; bottom:-6vh;
      animation: floatUp linear infinite, twinkle ease-in-out infinite;
      opacity:.75; pointer-events:none; user-select:none;
      will-change: transform, opacity;
    }
    @keyframes floatUp{
      from{ transform: translateY(0) translateX(0) rotate(0deg); opacity: .6; }
      to{   transform: translateY(-115vh) translateX(12px) rotate(8deg); opacity: .9; }
    }
    @keyframes twinkle{
      0%,100%{ filter:blur(3px); opacity:.55 }
      50%{ filter:blur(2px); opacity:.9 }
    }

    header{
      max-width:var(--maxw);
      margin: clamp(18px, 4vw, 40px) auto 14px;
      padding: 16px 20px;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    .brand{
      font-weight:800; letter-spacing:.2px; display:flex; align-items:center; gap:10px
    }
    .brand .dot{width:10px; height:10px; border-radius:50%; background:linear-gradient(145deg,var(--accent),#ffb3d9)}
    .next{
      color:var(--muted); font-size:14px
    }

    .card{
      max-width:var(--maxw);
      margin: 0 auto;
      background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03));
      border: var(--ring);
      box-shadow: var(--shadow);
      border-radius: 16px;
      padding: clamp(18px, 4vw, 28px);
      backdrop-filter: blur(var(--blur));
    }

    .gifwrap{
      position:relative; border-radius:12px; overflow:hidden;
      background:var(--bg2);
      border: 1px solid rgba(255,255,255,0.08);
      aspect-ratio: 16/9;
      display:grid; place-items:center; margin-bottom:14px;
    }
    .gifwrap img{
      width:100%; height:100%; object-fit:cover; display:block; opacity:.95
    }

    h1{
      font-family:"Playfair Display", serif;
      font-size: clamp(26px, 4.5vw, 40px);
      margin: 6px 0 8px;
      line-height:1.25;
      letter-spacing:.2px;
    }
    .compliment{
      font-size: clamp(18px, 2.5vw, 24px);
      line-height:1.55;
      margin-top: 6px;
    }

    .meta{
      display:flex; flex-wrap:wrap; gap:10px 16px; align-items:center; margin-top:14px;
      color:var(--muted); font-size:14px;
    }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 12px; border-radius:100px; background:var(--glass); border:var(--ring)
    }
    .pill b{color:var(--text)}
    .btns{ margin-top:16px; display:flex; gap:10px; flex-wrap:wrap }
    .btn{
      background: linear-gradient(145deg, var(--accent), #ffb3d9);
      color:#2b0f1c; font-weight:700; border:none; border-radius:12px;
      padding:12px 16px; cursor:pointer; box-shadow:0 8px 20px rgba(255,128,191,.25);
      transition: transform .08s ease, box-shadow .2s ease;
    }
    .btn:active{ transform: translateY(1px); box-shadow:0 4px 12px rgba(255,128,191,.18) }
    .btn.secondary{
      background: linear-gradient(145deg, var(--accent-2), #c5d3ff);
      color:#0f1a3a; box-shadow:0 8px 20px rgba(155,184,255,.22)
    }

    footer{
      max-width:var(--maxw);
      margin: 14px auto 40px; padding: 0 20px; color:var(--muted); font-size:13px
    }

    /* hearts */
    .heart{
      position: fixed; pointer-events:none; will-change: transform, opacity;
      animation: pop 900ms cubic-bezier(.21,.98,.6,.99) forwards;
      font-size:22px; filter: drop-shadow(0 3px 10px rgba(0,0,0,.25));
    }
    @keyframes pop{
      0%{ transform: translate(-50%,-50%) scale(.6); opacity:0 }
      50%{ opacity:1 }
      100%{ transform: translate(-50%,-180%) scale(1.1) rotate(-12deg); opacity:0 }
    }

    .note{
      margin-top:10px; font-size:12px; color:var(--muted)
    }
    .hint{
      font-size:12px; color:var(--muted); margin-top:8px
    }
    a,button{font-family:inherit}
    ::selection{background:#ffd2ec; color:#2b0f1c}
  </style>
</head>
<body>
  <div class="sky" id="sky" aria-hidden="true"></div>

  <header>
    <div class="brand"><span class="dot"></span><span>F√ºr Nadja ‚ú®</span></div>
    <div class="next" id="nextInfo">N√§chstes Kompliment um 21:00 (deutsche Zeit)</div>
  </header>

  <main class="card" id="card">
    <div class="gifwrap" id="gifwrap" role="img" aria-label="Nette GIF-√úberraschung f√ºr Nadja">
      <img id="gif" alt="Tages-GIF" />
    </div>

    <h1 id="title">–ù–∞–¥–µ–Ω—å–∫–∞,</h1>
    <div class="compliment" id="compliment">–¢–≤–æ—è —É–ª—ã–±–∫–∞ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –æ–±—ã—á–Ω–æ–µ —É—Ç—Ä–æ –≤ –º–∞–ª–µ–Ω—å–∫–æ–µ —á—É–¥–æ.</div>

    <div class="meta">
      <span class="pill">‚è≥ <b id="countdown">‚Äî:‚Äî:‚Äî</b> bis zum n√§chsten Kompliment</span>
      <span class="pill">üóìÔ∏è <span id="todayLabel"></span></span>
    </div>

    <div class="btns">
      <button class="btn" id="copyLink">Link kopieren</button>
      <button class="btn secondary" id="shufflePreview" title="Nur Vorschau ‚Äì das Tageskompliment bleibt bis 21:00 fest.">Andere Vorschau zeigen</button>
    </div>
    <div class="hint">Tipp: Tippe irgendwo ins Fenster f√ºr ein kleines ‚ù§Ô∏è-Feuerwerk.</div>

  </main>

  <footer>
    <div>Mit Liebe gebaut. –¢–≤–æ—ë –º–∞–ª–µ–Ω—å–∫–æ–µ 21:00-–æ–∫–æ—à–∫–æ —Ä–∞–¥–æ—Å—Ç–∏. ‚ú®</div>
  </footer>

  <script>
    // -----------------------------
    // Config
    // -----------------------------
    const TIMEZONE = "Europe/Berlin";
    const ROTATE_HOUR = 21; // 21:00 deutscher Zeit
    const TENOR_API_KEY = "AIzaSyAyimkuYQYF_FXVALexPuGQctUWRUduvRY"; // Tenor API Key
    const NICKNAMES = ["–ù–∞–¥—è","–ù–∞–¥–µ–Ω—å–∫–∞","–ù–∞–¥—é—à–∞","–ù–∞–¥—é—à–∫–∞","–ù–∞–¥–µ—á–∫–∞","–ù–∞–¥–µ–∂–¥–∞ –º–æ—è","–ù–∞–¥–µ–Ω—å–∫–∞-—Å–æ–ª–Ω—ã—à–∫–æ","–ù–∞–¥—é"];
    const NAME_BASE = "–ù–∞–¥—è";

    // --------- Tenor API Search Terms f√ºr jedes Thema ---------
    const TENOR_SEARCH_TERMS = {
      hearts: ["love heart", "cute heart", "romantic heart", "heart animation", "love cute"],
      cozy: ["cozy home", "warm hug", "comfort", "cozy winter", "hygge"],
      rain: ["rain aesthetic", "cozy rain", "rain window", "peaceful rain", "rain drops"],
      sun: ["sunshine happy", "bright sun", "sunny day", "golden hour", "warm light"],
      sketch: ["drawing art", "creative sketch", "art process", "doodle cute", "artistic"],
      design: ["design process", "creative work", "digital art", "modern design", "aesthetic"],
      sport: ["motivation fitness", "active lifestyle", "workout energy", "sports fun", "healthy"],
      future: ["space dreams", "future tech", "cosmic", "stars universe", "dreamy space"],
      cat: ["cute cat", "adorable kitten", "cat love", "fluffy cat", "cat cuddle"],
      calm: ["peaceful zen", "meditation calm", "relaxing nature", "serene peaceful", "mindful"],
      stars: ["starry night", "magical stars", "cosmic beauty", "night sky", "sparkle magic"]
    };

    // Cache f√ºr Tenor GIFs (um API-Aufrufe zu reduzieren)
    const tenorCache = {};

    // Fallback GIFs falls Tenor API nicht verf√ºgbar
    const FALLBACK_GIFS = [
      "https://media.giphy.com/media/26BRv0ThflsHCqDrG/giphy.gif",
      "https://media.giphy.com/media/3oriO0OEd9QIDdllqo/giphy.gif",
      "https://media.giphy.com/media/xT9IgG50Fb7Mi0prBC/giphy.gif"
    ];

    // --------- Komplimente (Name nur im Titel, NICHT im Text) ---------
    // Jedes Item: caption (mit {NICK}), text (ohne Name), theme: Tenor-Suchthema
    const COMPLIMENTS = [
      {caption:"–£—Ç—Ä–µ–Ω–Ω—è—è –º–∞–≥–∏—è –¥–ª—è {NICK} ‚ú®", theme: "sun", text:"–¢–≤–æ—è —É–ª—ã–±–∫–∞ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –æ–±—ã—á–Ω–æ–µ —É—Ç—Ä–æ –≤ –º–∞–ª–µ–Ω—å–∫–æ–µ —á—É–¥–æ."},
      {caption:"–°–µ–∫—Ä–µ—Ç–Ω–∞—è —Å—É–ø–µ—Ä—Å–∏–ª–∞ {NICK} üí´", theme: "hearts", text:"–¢—ã —É–º–µ–µ—à—å –¥–µ–ª–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –≤–µ—â–∏ –ª—ë–≥–∫–∏–º–∏, –∞ –≥—Ä—É—Å—Ç–Ω—ã–µ —Å–≤–µ—Ç–ª—ã–º–∏."},
      {caption:"–¢–≤–æ—Ä—á–µ—Å–∫–∏–π –≤–∏—Ö—Ä—å {NICK} üé®", theme: "sketch", text:"–ö–∞–∂–¥–∞—è —Ç–≤–æ—è –∏–¥–µ—è —ç—Ç–æ –º–∞–ª–µ–Ω—å–∫–∞—è –≤—Å–µ–ª–µ–Ω–Ω–∞—è, –ø–æ–ª–Ω–∞—è –∫—Ä–∞—Å–æ—Ç—ã."},
      {caption:"–î–∏–∑–∞–π–Ω–µ—Ä—Å–∫–∞—è –¥—É—à–∞ {NICK} ‚ú®", theme: "design", text:"–¢—ã –≤–∏–¥–∏—à—å –≥–∞—Ä–º–æ–Ω–∏—é —Ç–∞–º, –≥–¥–µ –¥—Ä—É–≥–∏–µ –≤–∏–¥—è—Ç —Ö–∞–æ—Å."},
      {caption:"–≠–Ω–µ—Ä–≥–∏—è –¥–≤–∏–∂–µ–Ω–∏—è {NICK} üåü", theme: "sport", text:"–¢–≤–æ—è —Ä–µ—à–∏–º–æ—Å—Ç—å –∑–∞—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–∞, —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π —Ö–æ—á–µ—Ç—Å—è –≥–æ—Ä—ã —Å–≤–µ—Ä–Ω—É—Ç—å."},
      {caption:"–£—é—Ç–Ω—ã–π –º–∏—Ä {NICK} ‚òï", theme: "cozy", text:"–í —Ç–≤–æ–∏—Ö –æ–±—ä—è—Ç–∏—è—Ö –¥–∞–∂–µ —Å–∞–º—ã–π —Ö–æ–ª–æ–¥–Ω—ã–π –¥–µ–Ω—å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç—ë–ø–ª—ã–º."},
      {caption:"–¢–∞–Ω–µ—Ü –ø–æ–¥ –¥–æ–∂–¥—ë–º {NICK} üåßÔ∏è", theme: "rain", text:"–¢—ã –Ω–∞—Ö–æ–¥–∏—à—å –∫—Ä–∞—Å–æ—Ç—É –≤ –∫–∞–∂–¥–æ–π –∫–∞–ø–ª–µ, –≤ –∫–∞–∂–¥–æ–º –º–æ–º–µ–Ω—Ç–µ."},
      {caption:"–ú–µ—á—Ç–∞—Ç–µ–ª—å–Ω–∏—Ü–∞ {NICK} üöÄ", theme: "future", text:"–¢–≤–æ–∏ –º–µ—á—Ç—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ –∫—Ä–∞—Å–∏–≤—ã, –æ–Ω–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–±—É–¥—É—Ç—Å—è."},
      {caption:"–ó–≤—ë–∑–¥–Ω–∞—è –ø—ã–ª—å {NICK} ‚≠ê", theme: "stars", text:"–¢—ã —Å–∏—è–µ—à—å —Ç–∞–∫ —è—Ä–∫–æ, —á—Ç–æ –¥–∞–∂–µ –∑–≤—ë–∑–¥—ã –∑–∞–≤–∏–¥—É—é—Ç."},
      {caption:"–ü–∞–ª–∏—Ç—Ä–∞ —á—É–≤—Å—Ç–≤ {NICK} üé®", theme: "design", text:"–¢–≤–æ—ë —Å–µ—Ä–¥—Ü–µ —ç—Ç–æ —Ü–µ–ª–∞—è —Ä–∞–¥—É–≥–∞ —ç–º–æ—Ü–∏–π –∏ –Ω–µ–∂–Ω–æ—Å—Ç–∏."},
      {caption:"–ó–∞–≤—Ç—Ä–∞—à–Ω–∏–π –¥–µ–Ω—å {NICK} üåÖ", theme: "future", text:"–ö–∞–∂–¥–æ–µ —Ç–≤–æ—ë –∑–∞–≤—Ç—Ä–∞ –±—É–¥–µ—Ç –ª—É—á—à–µ –≤—á–µ—Ä–∞—à–Ω–µ–≥–æ, —ç—Ç–æ –∑–∞–∫–æ–Ω –≤—Å–µ–ª–µ–Ω–Ω–æ–π."},
      {caption:"–•—É–¥–æ–∂–Ω–∏—Ü–∞ –∂–∏–∑–Ω–∏ {NICK} ‚úèÔ∏è", theme: "sketch", text:"–¢—ã —Ä–∏—Å—É–µ—à—å —Å—á–∞—Å—Ç—å–µ –≤ –≤–æ–∑–¥—É—Ö–µ –æ–¥–Ω–∏–º —Å–≤–æ–∏–º –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ–º."},
      {caption:"–ù–µ–∂–Ω–∞—è —Å–∏–ª–∞ {NICK} üíï", theme: "hearts", text:"–¢–≤–æ—è –¥–æ–±—Ä–æ—Ç–∞ —ç—Ç–æ –Ω–µ —Å–ª–∞–±–æ—Å—Ç—å, –∞ —Å–∞–º–∞—è –Ω–∞—Å—Ç–æ—è—â–∞—è —Å—É–ø–µ—Ä—Å–∏–ª–∞."},
      {caption:"–°–æ–ª–Ω–µ—á–Ω—ã–π –ª—É—á {NICK} ‚òÄÔ∏è", theme: "sun", text:"–î–∞–∂–µ –≤ —Å–∞–º—ã–π –ø–∞—Å–º—É—Ä–Ω—ã–π –¥–µ–Ω—å —Ç—ã –æ—Å—Ç–∞—ë—à—å—Å—è –º–æ–∏–º –ª–∏—á–Ω—ã–º —Å–æ–ª–Ω—Ü–µ–º."},
      {caption:"–ò–¥–µ–∞–ª—å–Ω—ã–π –º–æ–º–µ–Ω—Ç {NICK} ‚è∞", theme: "calm", text:"–° —Ç–æ–±–æ–π –∫–∞–∂–¥–∞—è —Å–µ–∫—É–Ω–¥–∞ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å."},
      {caption:"–§–æ—Ä–º—É–ª–∞ –∫—Ä–∞—Å–æ—Ç—ã {NICK} üìê", theme: "design", text:"–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –Ω–µ –º–æ–∂–µ—Ç –æ–±—ä—è—Å–Ω–∏—Ç—å, –ø–æ—á–µ–º—É —Ç—ã —Ç–∞–∫ –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞."},
      {caption:"–ú–µ–ª–æ–¥–∏—è –¥–Ω—è {NICK} üéµ", theme: "cozy", text:"–¢–≤–æ–π —Å–º–µ—Ö —Å–∞–º–∞—è –∫—Ä–∞—Å–∏–≤–∞—è –ø–µ—Å–Ω—è, –∫–æ—Ç–æ—Ä—É—é —è –∫–æ–≥–¥–∞-–ª–∏–±–æ —Å–ª—ã—à–∞–ª."},
      {caption:"–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ø–æ–≥–æ–¥–∞ {NICK} üå§Ô∏è", theme: "sun", text:"–£ —Ç–µ–±—è –≤–Ω—É—Ç—Ä–∏ –≤—Å–µ–≥–¥–∞ –≤–µ—Å–Ω–∞, –¥–∞–∂–µ –∫–æ–≥–¥–∞ —Å–Ω–∞—Ä—É–∂–∏ –∑–∏–º–∞."},
      {caption:"–î–∏–∑–∞–π–Ω-–º—ã—à–ª–µ–Ω–∏–µ {NICK} üí°", theme: "design", text:"–¢—ã —Å–æ–∑–¥–∞—ë—à—å –∫—Ä–∞—Å–æ—Ç—É –Ω–µ —Ç–æ–ª—å–∫–æ –≤ —Ä–∞–±–æ—Ç–µ, –Ω–æ –∏ –≤ –∂–∏–∑–Ω–∏."},
      {caption:"–ú–µ–¥–∏—Ç–∞—Ü–∏—è —Å {NICK} üßò‚Äç‚ôÄÔ∏è", theme: "calm", text:"–†—è–¥–æ–º —Å —Ç–æ–±–æ–π –º–∏—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç–∏—à–µ –∏ –¥–æ–±—Ä–µ–µ."},
      {caption:"–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –¥—É—Ö {NICK} üèÉ‚Äç‚ôÄÔ∏è", theme: "sport", text:"–¢—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ –¥–æ—Å—Ç–∏–≥–∞–µ—à—å —Ü–µ–ª–µ–π, —Ç—ã –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—à—å –¥—Ä—É–≥–∏—Ö –Ω–∞ –ø–æ–¥–≤–∏–≥–∏."},
      {caption:"–î–æ–º–∞—à–Ω–∏–π —É—é—Ç {NICK} üè†", theme: "cozy", text:"–î–æ–º —ç—Ç–æ –Ω–µ –º–µ—Å—Ç–æ, —ç—Ç–æ –æ—â—É—â–µ–Ω–∏–µ —Ç–µ–ø–ª–∞, –∫–æ—Ç–æ—Ä–æ–µ —Ç—ã –¥–∞—Ä–∏—à—å."},
      {caption:"–¢–≤–æ—Ä—á–µ—Å–∫–∏–π –±–ª–æ–∫–Ω–æ—Ç {NICK} üìù", theme: "sketch", text:"–ö–∞–∂–¥–∞—è —Ç–≤–æ—è –º—ã—Å–ª—å –¥–æ—Å—Ç–æ–π–Ω–∞ –±—ã—Ç—å –∑–∞–ø–µ—á–∞—Ç–ª—ë–Ω–Ω–æ–π –∑–æ–ª–æ—Ç—ã–º–∏ –±—É–∫–≤–∞–º–∏."},
      {caption:"–ë–µ—Ä–ª–∏–Ω—Å–∫–∏–µ –¥–æ–∂–¥–∏ –∏ {NICK} üåßÔ∏è", theme: "rain", text:"–î–∞–∂–µ —Å–µ—Ä–æ–µ –Ω–µ–±–æ –ë–µ—Ä–ª–∏–Ω–∞ –Ω–µ –º–æ–∂–µ—Ç –∑–∞—Ç–º–∏—Ç—å —Ç–≤–æ—ë —Å–∏—è–Ω–∏–µ."},
      {caption:"–ú–∞–≥–∏—è –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ {NICK} ‚ú®", theme: "hearts", text:"–¢—ã –ø—Ä–µ–≤—Ä–∞—â–∞–µ—à—å '–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ' –≤ '–∞ –ø–æ—á–µ–º—É –±—ã –∏ –Ω–µ—Ç?'."},
      {caption:"–ü–∏–∫—Å–µ–ª—å-–∞—Ä—Ç –¥—É—à–∏ {NICK} üñ•Ô∏è", theme: "design", text:"–ö–∞–∂–¥–∞—è –¥–µ—Ç–∞–ª—å –≤ —Ç–µ–±–µ –ø—Ä–æ–¥—É–º–∞–Ω–∞ –≤—Å–µ–ª–µ–Ω–Ω–æ–π –¥–æ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–∞."},
      {caption:"–ù–∞–±—Ä–æ—Å–æ–∫ —Å—á–∞—Å—Ç—å—è {NICK} ‚úèÔ∏è", theme: "sketch", text:"–¢–≤–æ—ë —Å—á–∞—Å—Ç—å–µ –∑–∞—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ, –æ–Ω–æ —Ä–∏—Å—É–µ—Ç —É–ª—ã–±–∫–∏ –Ω–∞ –ª–∏—Ü–∞—Ö –¥—Ä—É–≥–∏—Ö."},
      {caption:"–ò—Å—Ç–æ—Ä–∏—è –ª—é–±–≤–∏ {NICK} üíï", theme: "hearts", text:"–ö–∞–∂–¥—ã–π –¥–µ–Ω—å —Å —Ç–æ–±–æ–π —ç—Ç–æ –Ω–æ–≤–∞—è –≥–ª–∞–≤–∞ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏."},
      {caption:"–ü—Ä–∞–∑–¥–Ω–∏–∫ –≤ –±—É–¥–Ω–∏ {NICK} üéâ", theme: "stars", text:"–¢—ã —É–º–µ–µ—à—å –ø—Ä–µ–≤—Ä–∞—â–∞—Ç—å –æ–±—ã—á–Ω—ã–π –¥–µ–Ω—å –≤ –Ω–µ–∑–∞–±—ã–≤–∞–µ–º–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ."},
      {caption:"–ö—Ä–æ—Å—Å–æ–≤–∫–∏ –∏ –º–µ—á—Ç—ã {NICK} üëü", theme: "sport", text:"–ö–∞–∂–¥—ã–π —Ç–≤–æ–π —à–∞–≥ –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç —Ç–µ–±—è –∫ —á–µ–º—É-—Ç–æ —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ–º—É."},
      {caption:"–ó–∏–º–Ω–µ–µ —Ç–µ–ø–ª–æ {NICK} ‚ùÑÔ∏è", theme: "cozy", text:"–¢—ã —Ç–æ—Ç —Å–∞–º—ã–π –≥–æ—Ä—è—á–∏–π —á–∞–π –≤ —Ö–æ–ª–æ–¥–Ω—ã–π –¥–µ–Ω—å, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–≥—Ä–µ–≤–∞–µ—Ç –¥—É—à—É."},
      {caption:"–ö–æ—Å–º–∏—á–µ—Å–∫–∏–µ –ø–ª–∞–Ω—ã {NICK} üöÄ", theme: "future", text:"–¢–≤–æ—ë –±—É–¥—É—â–µ–µ —Å–∏—è–µ—Ç —è—Ä—á–µ –ª—é–±–æ–π –∑–≤–µ–∑–¥—ã –≤–æ –≤—Å–µ–ª–µ–Ω–Ω–æ–π."},
      {caption:"–ê—É—Ç–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å {NICK} üåü", theme: "hearts", text:"–ë—ã—Ç—å —Å–æ–±–æ–π —Ç–≤–æ—è —Å—É–ø–µ—Ä—Å–∏–ª–∞, –∏ —Ç—ã –≤–ª–∞–¥–µ–µ—à—å –µ—é –≤ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–µ."},
      {caption:"–ó–≤—ë–∑–¥–Ω–æ–µ –∂–µ–ª–∞–Ω–∏–µ {NICK} ‚≠ê", theme: "stars", text:"–ü—É—Å—Ç—å –∫–∞–∂–¥–æ–µ —Ç–≤–æ—ë –∂–µ–ª–∞–Ω–∏–µ –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º –ø–∞–¥–∞—é—â–∞—è –∑–≤–µ–∑–¥–∞."},
      {caption:"–¶–∏—Ñ—Ä–æ–≤–∞—è –º–∞–≥–∏—è {NICK} üíª", theme: "design", text:"–¢—ã –æ–∂–∏–≤–ª—è–µ—à—å –ø–∏–∫—Å–µ–ª–∏ –∏ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—à—å –∫–æ–¥ –≤ –∏—Å–∫—É—Å—Å—Ç–≤–æ."},
      {caption:"–°–æ–ª–Ω–µ—á–Ω—ã–π –ø—Ä–æ—Ä—ã–≤ {NICK} ‚òÄÔ∏è", theme: "sun", text:"–¢—ã —Ç–æ—Ç —Å–∞–º—ã–π –ª—É—á —Å–≤–µ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–±–∏–≤–∞–µ—Ç—Å—è —Å–∫–≤–æ–∑—å —Ç—É—á–∏."},
      {caption:"–ó–æ–ª–æ—Ç–æ–µ —Å–µ—á–µ–Ω–∏–µ {NICK} üìè", theme: "design", text:"–í —Ç–µ–±–µ –∏–¥–µ–∞–ª—å–Ω–æ —Å–æ—á–µ—Ç–∞—é—Ç—Å—è –∫—Ä–∞—Å–æ—Ç–∞, —É–º –∏ –¥–æ–±—Ä–æ—Ç–∞."},
      {caption:"–û–±—ä—è—Ç–∏—è —Ç–∏—à–∏–Ω—ã {NICK} ü§ó", theme: "cozy", text:"–ò–Ω–æ–≥–¥–∞ –ª—É—á—à–∏–µ –º–æ–º–µ–Ω—Ç—ã —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –º–æ–ª—á–∞–Ω–∏–µ —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π."},
      {caption:"–í–æ–ª—à–µ–±—Å—Ç–≤–æ –æ–±—ã—á–Ω–æ–≥–æ {NICK} ‚ú®", theme: "stars", text:"–¢—ã –Ω–∞—Ö–æ–¥–∏—à—å —á—É–¥–µ—Å–∞ –≤ —Å–∞–º—ã—Ö –ø—Ä–æ—Å—Ç—ã—Ö –≤–µ—â–∞—Ö, –∏ —ç—Ç–æ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ."},
      {caption:"–ö–æ—Ç–∏–∫–∏ –∏ –∫–æ–º—Ñ–æ—Ä—Ç {NICK} üê±", theme: "cat", text:"–¢–≤–æ—è –Ω–µ–∂–Ω–æ—Å—Ç—å –º–æ–∂–µ—Ç —Ä–∞—Å—Ç–æ–ø–∏—Ç—å –¥–∞–∂–µ —Å–∞–º–æ–µ —Ö–æ–ª–æ–¥–Ω–æ–µ —Å–µ—Ä–¥—Ü–µ."},
      {caption:"–ì–ª—É–±–æ–∫–∏–µ –≤–æ–¥—ã {NICK} üåä", theme: "calm", text:"–í —Ç–≤–æ–µ–π –¥—É—à–µ —Å—Ç–æ–ª—å–∫–æ –≥–ª—É–±–∏–Ω—ã –∏ –º—É–¥—Ä–æ—Å—Ç–∏, —Ü–µ–ª—ã–π –æ–∫–µ–∞–Ω."},
      {caption:"–ö—Ä–µ–∞—Ç–∏–≤–Ω–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è {NICK} üî¨", theme: "design", text:"–ö–∞–∂–¥–∞—è —Ç–≤–æ—è –∏–¥–µ—è —ç—Ç–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–¥–∞—Å—Ç—Å—è."},
      {caption:"–í–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–∫—Ä—ã—Ç–∏—è {NICK} ‚ùì", theme: "future", text:"–¢–≤–æ—ë –ª—é–±–æ–ø—ã—Ç—Å—Ç–≤–æ —ç—Ç–æ –∫–æ–º–ø–∞—Å, –∫–æ—Ç–æ—Ä—ã–π –≤–µ–¥—ë—Ç –∫ —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω—ã–º –æ—Ç–∫—Ä—ã—Ç–∏—è–º."},
      {caption:"–§–µ–≤—Ä–∞–ª—å—Å–∫–æ–µ —á—É–¥–æ {NICK} üíù", theme: "cozy", text:"–î–∞–∂–µ —Å–∞–º—ã–π –∫–æ—Ä–æ—Ç–∫–∏–π –º–µ—Å—è—Ü —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–º, –∫–æ–≥–¥–∞ –ø—Ä–æ–≤–æ–¥–∏—à—å –µ–≥–æ —Å —Ç–æ–±–æ–π."},
      {caption:"–ó–∞–≤—Ç—Ä–∞ –≤ —Ç–≤–æ–∏—Ö —Ä—É–∫–∞—Ö {NICK} üåÖ", theme: "sun", text:"–ë—É–¥—É—â–µ–µ –Ω–µ –º–æ–∂–µ—Ç –¥–æ–∂–¥–∞—Ç—å—Å—è –≤—Å—Ç—Ä–µ—á–∏ —Å —Ç–æ–±–æ–π, –æ–Ω–æ —É–∂–µ –≤–ª—é–±–ª–µ–Ω–æ."},
      {caption:"–≠–Ω–µ—Ä–≥–∏—è –¥–≤–∏–∂–µ–Ω–∏—è {NICK} ‚ö°", theme: "sport", text:"–¢–≤–æ—è —ç–Ω–µ—Ä–≥–∏—è –∑–∞—Ä—è–∂–∞–µ—Ç –≤—Å–µ—Ö –≤–æ–∫—Ä—É–≥ –Ω–∞ –ø–æ–¥–≤–∏–≥–∏ –∏ –º–µ—á—Ç—ã."},
      {caption:"–ö–∞—Ä–∞–Ω–¥–∞—à–Ω—ã–µ –º–µ—á—Ç—ã {NICK} ‚úèÔ∏è", theme: "sketch", text:"–ö–∞–∂–¥—ã–π —Ç–≤–æ–π —Ä–∏—Å—É–Ω–æ–∫ —ç—Ç–æ –æ–∫–Ω–æ –≤ –º–∏—Ä, –≥–¥–µ –≤—Å—ë –≤–æ–∑–º–æ–∂–Ω–æ."},
      {caption:"–†–µ—Ü–µ–ø—Ç —Å—á–∞—Å—Ç—å—è {NICK} üìñ", theme: "cozy", text:"–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –ø—Ä–æ—Å—Ç—ã–µ: —Ç–≤–æ—è —É–ª—ã–±–∫–∞, —Ç—ë–ø–ª—ã–π —á–∞–π –∏ –Ω–µ–º–Ω–æ–≥–æ –≤–æ–ª—à–µ–±—Å—Ç–≤–∞."}
    ];

    // -----------------------------
    // Utilities: TZ helpers
    // -----------------------------
    const fmtFull = new Intl.DateTimeFormat('en-CA', {
      timeZone: TIMEZONE, hour12:false,
      year:'numeric', month:'2-digit', day:'2-digit',
      hour:'2-digit', minute:'2-digit', second:'2-digit'
    });
    function partsFrom(date){
      const p = {};
      for (const part of fmtFull.formatToParts(date)){ p[part.type] = part.value; }
      ['year','month','day','hour','minute','second'].forEach(k => p[k] = parseInt(p[k],10));
      return p;
    }
    function labelForToday(){
      const p = partsFrom(new Date());
      const days = ["So","Mo","Di","Mi","Do","Fr","Sa"];
      const d = new Date(p.year, p.month-1, p.day);
      return `${days[d.getDay()]} ${String(p.day).padStart(2,'0')}.${String(p.month).padStart(2,'0')}.${p.year}`;
    }
    function previousYMD(p){
      const d = new Date(Date.UTC(p.year, p.month-1, p.day));
      d.setUTCDate(d.getUTCDate()-1);
      return { year:d.getUTCFullYear(), month:d.getUTCMonth()+1, day:d.getUTCDate() };
    }
    function rotationYMD(nowParts){
      // "Tag" beginnt um 21:00 Berlin ‚Äì vor 21:00 geh√∂rt noch zum Vortag
      if(nowParts.hour < ROTATE_HOUR){
        return previousYMD(nowParts);
      }
      return {year: nowParts.year, month: nowParts.month, day: nowParts.day};
    }
    function dayIndex(ymd){
      const ms = Date.UTC(ymd.year, ymd.month-1, ymd.day);
      const day = Math.floor(ms / 86400000);
      const n = COMPLIMENTS.length;
      return ((day % n) + n) % n;
    }
    function nextRotationParts(nowParts){
      let y = nowParts.year, m = nowParts.month, d = nowParts.day;
      if(nowParts.hour >= ROTATE_HOUR) {
        const dt = new Date(Date.UTC(y, m-1, d));
        dt.setUTCDate(dt.getUTCDate()+1);
        y = dt.getUTCFullYear(); m = dt.getUTCMonth()+1; d = dt.getUTCDate();
      }
      return {year:y, month:m, day:d, hour:ROTATE_HOUR, minute:0, second:0};
    }
    function roughCountdown(nowParts, targetParts){
      const toSec = p => p.hour*3600 + p.minute*60 + p.second;
      let days = 0;
      let ns = toSec(nowParts);
      let ts = toSec(targetParts);
      if(nowParts.year===targetParts.year && nowParts.month===targetParts.month && nowParts.day===targetParts.day){
        if(ts < ns){ days = 1; }
      } else {
        days = 1;
      }
      let secs = (days*24*3600 - ns + ts);
      if(secs < 0) secs = 0;
      const h = Math.floor(secs/3600);
      const m = Math.floor((secs%3600)/60);
      const s = secs%60;
      return {h,m,s};
    }

    function fill(str, nick){
      return (str||"").replaceAll("{NICK}", nick || NAME_BASE);
    }

    // -----------------------------
    // Tenor API Functions
    // -----------------------------
    async function fetchTenorGifs(theme, dayIndex) {
      const cacheKey = `${theme}_${dayIndex}`;
      
      // Pr√ºfe Cache zuerst
      if (tenorCache[cacheKey]) {
        return tenorCache[cacheKey];
      }

      const searchTerms = TENOR_SEARCH_TERMS[theme] || TENOR_SEARCH_TERMS.hearts;
      const searchTerm = searchTerms[dayIndex % searchTerms.length];
      
      try {
        const response = await fetch(`https://tenor.googleapis.com/v2/search?q=${encodeURIComponent(searchTerm)}&key=${TENOR_API_KEY}&client_key=nadja_compliments&limit=20&media_filter=gif&ar_range=all`);
        
        if (!response.ok) {
          throw new Error(`Tenor API Error: ${response.status}`);
        }
        
        const data = await response.json();
        const gifs = data.results?.map(result => result.media_formats?.gif?.url).filter(Boolean) || [];
        
        // Cache das Ergebnis
        tenorCache[cacheKey] = gifs;
        
        return gifs;
      } catch (error) {
        console.warn('Tenor API failed:', error);
        return FALLBACK_GIFS;
      }
    }

    async function selectGifForDay(theme, dayIndex) {
      const gifs = await fetchTenorGifs(theme, dayIndex);
      
      if (gifs.length === 0) {
        return FALLBACK_GIFS[dayIndex % FALLBACK_GIFS.length];
      }
      
      // Deterministische Auswahl basierend auf dayIndex
      return gifs[dayIndex % gifs.length];
    }

    // -----------------------------
    // UI logic
    // -----------------------------
    // const elHeadline = document.getElementById('headline'); // removed
    const elTitle = document.getElementById('title');
    const elCompliment = document.getElementById('compliment');
    const elCountdown = document.getElementById('countdown');
    const elToday = document.getElementById('todayLabel');
    const elNextInfo = document.getElementById('nextInfo');
    const elGif = document.getElementById('gif');

    function selectNick(idx){ return NICKNAMES[idx % NICKNAMES.length] || NAME_BASE; }

    function tryLoadGif(url){
      const img = new Image();
      img.onload = ()=>{ 
        elGif.src = url; 
        elGif.style.opacity = '1';
      };
      img.onerror = ()=> {
        // Fallback to first fallback GIF
        elGif.src = FALLBACK_GIFS[0];
        elGif.style.opacity = '1';
      };
      elGif.style.opacity = '0.5'; // Loading state
      img.src = url;
    }

    async function updateUI(forceIndex){
      const now = new Date();
      const nowParts = partsFrom(now);
      const activeYMD = rotationYMD(nowParts);
      const baseIdx = dayIndex(activeYMD);
      const idx = (typeof forceIndex==='number') ? ((forceIndex % COMPLIMENTS.length)+COMPLIMENTS.length)%COMPLIMENTS.length : baseIdx;

      const nick = selectNick(idx);
      const item = COMPLIMENTS[idx];

      // Text (headline removed)
      elTitle.textContent = `${nick},`;
      elCompliment.textContent = item.text;
      elToday.textContent = labelForToday();

      // GIF von Tenor API laden
      try {
        const gifUrl = await selectGifForDay(item.theme, idx);
        tryLoadGif(gifUrl);
      } catch (error) {
        console.warn('Failed to load Tenor GIF:', error);
        tryLoadGif(FALLBACK_GIFS[idx % FALLBACK_GIFS.length]);
      }

      // Countdown & Info
      const target = nextRotationParts(nowParts);
      const dd = roughCountdown(nowParts, target);
      elCountdown.textContent = `${String(dd.h).padStart(2,'0')}:${String(dd.m).padStart(2,'0')}:${String(dd.s).padStart(2,'0')}`;
      elNextInfo.textContent = `N√§chstes Kompliment um ${String(ROTATE_HOUR).padStart(2,'0')}:00 (${TIMEZONE.replace('Europe/','')})`;
    }

    // tick
    let previewOffset = 0;
    setInterval(()=>{
      const nowParts = partsFrom(new Date());
      const realIdx = dayIndex(rotationYMD(nowParts));
      updateUI(realIdx + previewOffset);

      // harte Umschalt-Logik exakt bei 21:00 Berlin
      if(nowParts.hour===ROTATE_HOUR && nowParts.minute===0 && nowParts.second===0){
        previewOffset = 0; // zur√ºck auf echten Tageswert
        updateUI();
      }
    }, 1000);

    // shuffle preview (nur visuell, Tageswert bleibt!)
    document.getElementById('shufflePreview').addEventListener('click', ()=>{
      previewOffset = (previewOffset + 1) % COMPLIMENTS.length;
      const nowParts = partsFrom(new Date());
      updateUI(dayIndex(rotationYMD(nowParts)) + previewOffset);
    });

    // copy link
    document.getElementById('copyLink').addEventListener('click', async ()=>{
      try{
        await navigator.clipboard.writeText(location.href);
        toast("Link kopiert üíå");
      }catch(e){
        toast("Kopieren nicht m√∂glich ‚Äì markiere die Adresszeile ‚ù§Ô∏è");
      }
    });

    // hearts on click
    window.addEventListener('pointerdown', e=>{
      makeHeart(e.clientX, e.clientY);
    });

    function makeHeart(x,y){
      const el = document.createElement('div');
      el.className='heart';
      el.textContent = Math.random() < .5 ? '‚ù§Ô∏è' : 'üíñ';
      el.style.left = x+'px'; el.style.top = y+'px';
      el.style.zIndex = 1000;
      document.body.appendChild(el);
      setTimeout(()=> el.remove(), 950);
    }

    // tiny toast
    let toastEl;
    function toast(msg){
      if(!toastEl){
        toastEl = document.createElement('div');
        toastEl.style.position='fixed';
        toastEl.style.left='50%'; toastEl.style.bottom='24px';
        toastEl.style.transform='translateX(-50%)';
        toastEl.style.background='rgba(0,0,0,.6)';
        toastEl.style.backdropFilter='blur(8px)';
        toastEl.style.border='1px solid rgba(255,255,255,.14)';
        toastEl.style.padding='10px 14px'; toastEl.style.borderRadius='10px';
        toastEl.style.color='white'; toastEl.style.font='600 14px Inter, system-ui';
        toastEl.style.boxShadow='0 8px 24px rgba(0,0,0,.35)';
        document.body.appendChild(toastEl);
      }
      toastEl.textContent = msg;
      toastEl.style.opacity='1';
      clearTimeout(toastEl._t);
      toastEl._t = setTimeout(()=> toastEl.style.opacity='0', 1300);
    }

    // ‚ú® background stars
    (function makeStars(){
      const sky = document.getElementById('sky');
      const count = 38;
      for(let i=0;i<count;i++){
        const s = document.createElement('span');
        s.className = 'star';
        s.textContent = '‚ú®';
        const size = (Math.random()*22)+10; // 10..32px
        const left = Math.random()*100;     // vw
        const dur = 22 + Math.random()*34;  // 22..56s
        const delay = Math.random()*-dur;   // negative for staggered
        s.style.left = left+'vw';
        s.style.fontSize = size+'px';
        s.style.animationDuration = `${dur}s, ${6 + Math.random()*6}s`;
        s.style.animationDelay = `${delay}s, ${Math.random()*2}s`;
        s.style.opacity = (0.55 + Math.random()*0.4).toFixed(2);
        sky.appendChild(s);
      }
    })();

    // initial paint
    updateUI();
  </script>
</body>
</html>
